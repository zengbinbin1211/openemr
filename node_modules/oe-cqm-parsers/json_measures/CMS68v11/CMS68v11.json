{"_id":{"$oid":"6260c30dc6e47bee42d97996"},"calculate_sdes":null,"calculation_method":"PATIENT","cms_id":"CMS68v11","component":false,"component_hqmf_set_ids":[],"composite":false,"composite_hqmf_set_id":null,"cql_libraries":[{"_id":{"$oid":"6260c30dc6e47bee42d97b32"},"cql":"library DocumentationofCurrentMedications version '11.0.000'\r\n\r\nusing QDM version '5.5'\r\n\r\ninclude MATGlobalCommonFunctions version '6.2.000' called Global\r\n\r\ncodesystem \"LOINC\": 'urn:oid:2.16.840.1.113883.6.1'\r\ncodesystem \"SNOMEDCT\": 'urn:oid:2.16.840.1.113883.6.96'\r\n\r\nvalueset \"Encounter to Document Medications\": 'urn:oid:2.16.840.1.113883.3.600.1.1834'\r\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837'\r\nvalueset \"Medical Reason\": 'urn:oid:2.16.840.1.113883.3.526.3.1007'\r\nvalueset \"ONC Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1'\r\nvalueset \"Payer\": 'urn:oid:2.16.840.1.114222.4.11.3591'\r\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836'\r\n\r\ncode \"Birth date\": '21112-8' from \"LOINC\" display 'Birth date'\r\ncode \"Documentation of current medications (procedure)\": '428191000124101' from \"SNOMEDCT\" display 'Documentation of current medications (procedure)'\r\n\r\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\r\n\r\ncontext Patient\r\n\r\ndefine \"SDE Ethnicity\":\r\n  [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\r\n\r\ndefine \"SDE Payer\":\r\n  [\"Patient Characteristic Payer\": \"Payer\"]\r\n\r\ndefine \"SDE Race\":\r\n  [\"Patient Characteristic Race\": \"Race\"]\r\n\r\ndefine \"SDE Sex\":\r\n  [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\r\n\r\ndefine \"Denominator\":\r\n  \"Initial Population\"\r\n\r\ndefine \"Denominator Exceptions\":\r\n  \"Qualifying Encounter during Measurement Period\" QualifyingEncounter\r\n    with ( [\"Procedure, Not Performed\": \"Documentation of current medications (procedure)\"]\r\n      union [\"Intervention, Not Performed\": \"Documentation of current medications (procedure)\"] ) MedicationsNotDocumented\r\n      such that MedicationsNotDocumented.authorDatetime during QualifyingEncounter.relevantPeriod\r\n        and MedicationsNotDocumented.negationRationale in \"Medical Reason\"\r\n\r\ndefine \"Initial Population\":\r\n  \"Qualifying Encounter during Measurement Period\" QualifyingEncounter\r\n    with [\"Patient Characteristic Birthdate\": \"Birth date\"] BirthDate\r\n      such that Global.\"CalendarAgeInYearsAt\" ( BirthDate.birthDatetime, start of \"Measurement Period\" ) \u003e= 18\r\n\r\ndefine \"Qualifying Encounter during Measurement Period\":\r\n  [\"Encounter, Performed\": \"Encounter to Document Medications\"] ValidEncounter\r\n    where ValidEncounter.relevantPeriod during \"Measurement Period\"\r\n\r\ndefine \"Numerator\":\r\n  \"Qualifying Encounter during Measurement Period\" QualifyingEncounter\r\n    with ( [\"Procedure, Performed\": \"Documentation of current medications (procedure)\"]\r\n      union [\"Intervention, Performed\": \"Documentation of current medications (procedure)\"] ) MedicationsDocumented\r\n      such that Global.\"NormalizeInterval\" ( MedicationsDocumented.relevantDatetime, MedicationsDocumented.relevantPeriod ) during QualifyingEncounter.relevantPeriod","elm":{"library":{"identifier":{"id":"DocumentationofCurrentMedications","version":"11.0.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"3:1-3:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_5","version":"5.5"}]},"includes":{"def":[{"localId":"2","locator":"5:1-5:64","localIdentifier":"Global","path":"MATGlobalCommonFunctions","version":"6.2.000"}]},"parameters":{"def":[{"localId":"17","locator":"20:1-20:49","name":"Measurement Period","accessLevel":"Public","parameterTypeSpecifier":{"localId":"16","locator":"20:32-20:49","type":"IntervalTypeSpecifier","pointType":{"localId":"15","locator":"20:41-20:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"codeSystems":{"def":[{"localId":"3","locator":"7:1-7:51","name":"LOINC","id":"2.16.840.1.113883.6.1","accessLevel":"Public"},{"localId":"4","locator":"8:1-8:55","name":"SNOMEDCT","id":"2.16.840.1.113883.6.96","accessLevel":"Public"}]},"valueSets":{"def":[{"localId":"5","locator":"10:1-10:86","name":"Encounter to Document Medications","id":"2.16.840.1.113883.3.600.1.1834","accessLevel":"Public"},{"localId":"6","locator":"11:1-11:58","name":"Ethnicity","id":"2.16.840.1.114222.4.11.837","accessLevel":"Public"},{"localId":"7","locator":"12:1-12:67","name":"Medical Reason","id":"2.16.840.1.113883.3.526.3.1007","accessLevel":"Public"},{"localId":"8","locator":"13:1-13:68","name":"ONC Administrative Sex","id":"2.16.840.1.113762.1.4.1","accessLevel":"Public"},{"localId":"9","locator":"14:1-14:55","name":"Payer","id":"2.16.840.1.114222.4.11.3591","accessLevel":"Public"},{"localId":"10","locator":"15:1-15:53","name":"Race","id":"2.16.840.1.114222.4.11.836","accessLevel":"Public"}]},"codes":{"def":[{"localId":"12","locator":"17:1-17:62","name":"Birth date","id":"21112-8","display":"Birth date","accessLevel":"Public","codeSystem":{"localId":"11","locator":"17:35-17:41","name":"LOINC"}},{"localId":"14","locator":"18:1-18:149","name":"Documentation of current medications (procedure)","id":"428191000124101","display":"Documentation of current medications (procedure)","accessLevel":"Public","codeSystem":{"localId":"13","locator":"18:81-18:90","name":"SNOMEDCT"}}]},"statements":{"def":[{"locator":"22:1-22:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"22:1-22:15","dataType":"{urn:healthit-gov:qdm:v5_5}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"19","locator":"24:1-25:51","name":"SDE Ethnicity","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"19","s":[{"value":["define ","\"SDE Ethnicity\"",":\n  "]},{"r":"18","s":[{"value":["[","\"Patient Characteristic Ethnicity\"",": "]},{"s":[{"value":["\"Ethnicity\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"18","locator":"25:3-25:51","dataType":"{urn:healthit-gov:qdm:v5_5}PatientCharacteristicEthnicity","codeProperty":"code","type":"Retrieve","codes":{"locator":"25:40-25:50","name":"Ethnicity","type":"ValueSetRef"}}},{"localId":"21","locator":"27:1-28:43","name":"SDE Payer","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"21","s":[{"value":["define ","\"SDE Payer\"",":\n  "]},{"r":"20","s":[{"value":["[","\"Patient Characteristic Payer\"",": "]},{"s":[{"value":["\"Payer\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"20","locator":"28:3-28:43","dataType":"{urn:healthit-gov:qdm:v5_5}PatientCharacteristicPayer","codeProperty":"code","type":"Retrieve","codes":{"locator":"28:36-28:42","name":"Payer","type":"ValueSetRef"}}},{"localId":"23","locator":"30:1-31:41","name":"SDE Race","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"23","s":[{"value":["define ","\"SDE Race\"",":\n  "]},{"r":"22","s":[{"value":["[","\"Patient Characteristic Race\"",": "]},{"s":[{"value":["\"Race\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"22","locator":"31:3-31:41","dataType":"{urn:healthit-gov:qdm:v5_5}PatientCharacteristicRace","codeProperty":"code","type":"Retrieve","codes":{"locator":"31:35-31:40","name":"Race","type":"ValueSetRef"}}},{"localId":"25","locator":"33:1-34:58","name":"SDE Sex","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"25","s":[{"value":["define ","\"SDE Sex\"",":\n  "]},{"r":"24","s":[{"value":["[","\"Patient Characteristic Sex\"",": "]},{"s":[{"value":["\"ONC Administrative Sex\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"24","locator":"34:3-34:58","dataType":"{urn:healthit-gov:qdm:v5_5}PatientCharacteristicSex","codeProperty":"code","type":"Retrieve","codes":{"locator":"34:34-34:57","name":"ONC Administrative Sex","type":"ValueSetRef"}}},{"localId":"33","locator":"51:1-53:67","name":"Qualifying Encounter during Measurement Period","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"33","s":[{"value":["define ","\"Qualifying Encounter during Measurement Period\"",":\n  "]},{"r":"32","s":[{"s":[{"r":"27","s":[{"r":"26","s":[{"r":"26","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter to Document Medications\""]}]},{"value":["]"]}]}]},{"value":[" ","ValidEncounter"]}]}]},{"value":["\n    "]},{"r":"31","s":[{"value":["where "]},{"r":"31","s":[{"r":"29","s":[{"r":"28","s":[{"value":["ValidEncounter"]}]},{"value":["."]},{"r":"29","s":[{"value":["relevantPeriod"]}]}]},{"r":"31","value":[" ","during"," "]},{"r":"30","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}}],"expression":{"localId":"32","locator":"52:3-53:67","type":"Query","source":[{"localId":"27","locator":"52:3-52:78","alias":"ValidEncounter","expression":{"localId":"26","locator":"52:3-52:63","dataType":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","type":"Retrieve","codes":{"locator":"52:28-52:62","name":"Encounter to Document Medications","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"31","locator":"53:5-53:67","type":"IncludedIn","operand":[{"localId":"29","locator":"53:11-53:39","path":"relevantPeriod","scope":"ValidEncounter","type":"Property"},{"localId":"30","locator":"53:48-53:67","name":"Measurement Period","type":"ParameterRef"}]}}},{"localId":"48","locator":"46:1-49:110","name":"Initial Population","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"48","s":[{"value":["define ","\"Initial Population\"",":\n  "]},{"r":"47","s":[{"s":[{"r":"35","s":[{"r":"34","s":[{"s":[{"value":["\"Qualifying Encounter during Measurement Period\""]}]}]},{"value":[" ","QualifyingEncounter"]}]}]},{"value":["\n    "]},{"r":"46","s":[{"value":["with "]},{"r":"37","s":[{"r":"36","s":[{"r":"36","s":[{"value":["[","\"Patient Characteristic Birthdate\"",": "]},{"s":[{"value":["\"Birth date\""]}]},{"value":["]"]}]}]},{"value":[" ","BirthDate"]}]},{"value":["\n      such that "]},{"r":"45","s":[{"r":"43","s":[{"r":"38","s":[{"value":["Global"]}]},{"value":["."]},{"r":"43","s":[{"value":["\"CalendarAgeInYearsAt\""," ( "]},{"r":"40","s":[{"r":"39","s":[{"value":["BirthDate"]}]},{"value":["."]},{"r":"40","s":[{"value":["birthDatetime"]}]}]},{"value":[", "]},{"r":"42","s":[{"value":["start of "]},{"r":"41","s":[{"value":["\"Measurement Period\""]}]}]},{"value":[" )"]}]}]},{"r":"44","value":[" ","\u003e="," ","18"]}]}]}]}]}}],"expression":{"localId":"47","locator":"47:3-49:110","type":"Query","source":[{"localId":"35","locator":"47:3-47:70","alias":"QualifyingEncounter","expression":{"localId":"34","locator":"47:3-47:50","name":"Qualifying Encounter during Measurement Period","type":"ExpressionRef"}}],"relationship":[{"localId":"46","locator":"48:5-49:110","alias":"BirthDate","type":"With","expression":{"localId":"36","locator":"48:10-48:59","dataType":"{urn:healthit-gov:qdm:v5_5}PatientCharacteristicBirthdate","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"48:47-48:58","name":"Birth date","type":"CodeRef"}}},"suchThat":{"localId":"45","locator":"49:17-49:110","type":"GreaterOrEqual","operand":[{"localId":"43","locator":"49:17-49:104","name":"CalendarAgeInYearsAt","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"40","locator":"49:49-49:71","path":"birthDatetime","scope":"BirthDate","type":"Property"},{"localId":"42","locator":"49:74-49:102","type":"Start","operand":{"localId":"41","locator":"49:83-49:102","name":"Measurement Period","type":"ParameterRef"}}]},{"localId":"44","locator":"49:109-49:110","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"18","type":"Literal"}]}}]}},{"localId":"50","locator":"36:1-37:22","name":"Denominator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"50","s":[{"value":["define ","\"Denominator\"",":\n  "]},{"r":"49","s":[{"value":["\"Initial Population\""]}]}]}}],"expression":{"localId":"49","locator":"37:3-37:22","name":"Initial Population","type":"ExpressionRef"}},{"localId":"69","locator":"39:1-44:74","name":"Denominator Exceptions","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"69","s":[{"value":["define ","\"Denominator Exceptions\"",":\n  "]},{"r":"68","s":[{"s":[{"r":"52","s":[{"r":"51","s":[{"s":[{"value":["\"Qualifying Encounter during Measurement Period\""]}]}]},{"value":[" ","QualifyingEncounter"]}]}]},{"value":["\n    "]},{"r":"67","s":[{"value":["with "]},{"r":"56","s":[{"r":"55","s":[{"value":["( "]},{"r":"55","s":[{"r":"53","s":[{"value":["[","\"Procedure, Not Performed\"",": "]},{"s":[{"value":["\"Documentation of current medications (procedure)\""]}]},{"value":["]"]}]},{"value":["\n      union "]},{"r":"54","s":[{"value":["[","\"Intervention, Not Performed\"",": "]},{"s":[{"value":["\"Documentation of current medications (procedure)\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","MedicationsNotDocumented"]}]},{"value":["\n      such that "]},{"r":"66","s":[{"r":"61","s":[{"r":"58","s":[{"r":"57","s":[{"value":["MedicationsNotDocumented"]}]},{"value":["."]},{"r":"58","s":[{"value":["authorDatetime"]}]}]},{"r":"61","value":[" ","during"," "]},{"r":"60","s":[{"r":"59","s":[{"value":["QualifyingEncounter"]}]},{"value":["."]},{"r":"60","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["\n        and "]},{"r":"65","s":[{"r":"63","s":[{"r":"62","s":[{"value":["MedicationsNotDocumented"]}]},{"value":["."]},{"r":"63","s":[{"value":["negationRationale"]}]}]},{"value":[" in "]},{"r":"64","s":[{"value":["\"Medical Reason\""]}]}]}]}]}]}]}}],"expression":{"localId":"68","locator":"40:3-44:74","type":"Query","source":[{"localId":"52","locator":"40:3-40:70","alias":"QualifyingEncounter","expression":{"localId":"51","locator":"40:3-40:50","name":"Qualifying Encounter during Measurement Period","type":"ExpressionRef"}}],"relationship":[{"localId":"67","locator":"41:5-44:74","alias":"MedicationsNotDocumented","type":"With","expression":{"localId":"55","locator":"41:10-42:97","type":"Union","operand":[{"type":"As","operand":{"localId":"53","locator":"41:12-41:91","dataType":"{urn:healthit-gov:qdm:v5_5}NegativeProcedurePerformed","templateId":"NegativeProcedurePerformed","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"41:41-41:90","name":"Documentation of current medications (procedure)","type":"CodeRef"}}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_5}NegativeInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_5}NegativeProcedurePerformed","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"54","locator":"42:13-42:95","dataType":"{urn:healthit-gov:qdm:v5_5}NegativeInterventionPerformed","templateId":"NegativeInterventionPerformed","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"42:45-42:94","name":"Documentation of current medications (procedure)","type":"CodeRef"}}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_5}NegativeInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_5}NegativeProcedurePerformed","type":"NamedTypeSpecifier"}]}}}]},"suchThat":{"localId":"66","locator":"43:17-44:74","type":"And","operand":[{"localId":"61","locator":"43:17-43:97","type":"In","operand":[{"localId":"58","locator":"43:17-43:55","path":"authorDatetime","scope":"MedicationsNotDocumented","type":"Property"},{"localId":"60","locator":"43:64-43:97","path":"relevantPeriod","scope":"QualifyingEncounter","type":"Property"}]},{"localId":"65","locator":"44:13-44:74","type":"InValueSet","code":{"localId":"63","locator":"44:13-44:54","path":"negationRationale","scope":"MedicationsNotDocumented","type":"Property"},"valueset":{"localId":"64","locator":"44:59-44:74","name":"Medical Reason"}}]}}]}},{"localId":"87","locator":"55:1-59:165","name":"Numerator","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"87","s":[{"value":["define ","\"Numerator\"",":\n  "]},{"r":"86","s":[{"s":[{"r":"71","s":[{"r":"70","s":[{"s":[{"value":["\"Qualifying Encounter during Measurement Period\""]}]}]},{"value":[" ","QualifyingEncounter"]}]}]},{"value":["\n    "]},{"r":"85","s":[{"value":["with "]},{"r":"75","s":[{"r":"74","s":[{"value":["( "]},{"r":"74","s":[{"r":"72","s":[{"value":["[","\"Procedure, Performed\"",": "]},{"s":[{"value":["\"Documentation of current medications (procedure)\""]}]},{"value":["]"]}]},{"value":["\n      union "]},{"r":"73","s":[{"value":["[","\"Intervention, Performed\"",": "]},{"s":[{"value":["\"Documentation of current medications (procedure)\""]}]},{"value":["]"]}]}]},{"value":[" )"]}]},{"value":[" ","MedicationsDocumented"]}]},{"value":["\n      such that "]},{"r":"84","s":[{"r":"81","s":[{"r":"76","s":[{"value":["Global"]}]},{"value":["."]},{"r":"81","s":[{"value":["\"NormalizeInterval\""," ( "]},{"r":"78","s":[{"r":"77","s":[{"value":["MedicationsDocumented"]}]},{"value":["."]},{"r":"78","s":[{"value":["relevantDatetime"]}]}]},{"value":[", "]},{"r":"80","s":[{"r":"79","s":[{"value":["MedicationsDocumented"]}]},{"value":["."]},{"r":"80","s":[{"value":["relevantPeriod"]}]}]},{"value":[" )"]}]}]},{"r":"84","value":[" ","during"," "]},{"r":"83","s":[{"r":"82","s":[{"value":["QualifyingEncounter"]}]},{"value":["."]},{"r":"83","s":[{"value":["relevantPeriod"]}]}]}]}]}]}]}}],"expression":{"localId":"86","locator":"56:3-59:165","type":"Query","source":[{"localId":"71","locator":"56:3-56:70","alias":"QualifyingEncounter","expression":{"localId":"70","locator":"56:3-56:50","name":"Qualifying Encounter during Measurement Period","type":"ExpressionRef"}}],"relationship":[{"localId":"85","locator":"57:5-59:165","alias":"MedicationsDocumented","type":"With","expression":{"localId":"74","locator":"57:10-58:93","type":"Union","operand":[{"type":"As","operand":{"localId":"72","locator":"57:12-57:87","dataType":"{urn:healthit-gov:qdm:v5_5}PositiveProcedurePerformed","templateId":"PositiveProcedurePerformed","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"57:37-57:86","name":"Documentation of current medications (procedure)","type":"CodeRef"}}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_5}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_5}PositiveProcedurePerformed","type":"NamedTypeSpecifier"}]}}},{"type":"As","operand":{"localId":"73","locator":"58:13-58:91","dataType":"{urn:healthit-gov:qdm:v5_5}PositiveInterventionPerformed","templateId":"PositiveInterventionPerformed","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"locator":"58:41-58:90","name":"Documentation of current medications (procedure)","type":"CodeRef"}}},"asTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"type":"ChoiceTypeSpecifier","choice":[{"name":"{urn:healthit-gov:qdm:v5_5}PositiveInterventionPerformed","type":"NamedTypeSpecifier"},{"name":"{urn:healthit-gov:qdm:v5_5}PositiveProcedurePerformed","type":"NamedTypeSpecifier"}]}}}]},"suchThat":{"localId":"84","locator":"59:17-59:165","type":"IncludedIn","operand":[{"localId":"81","locator":"59:17-59:123","name":"NormalizeInterval","libraryName":"Global","type":"FunctionRef","operand":[{"localId":"78","locator":"59:46-59:83","path":"relevantDatetime","scope":"MedicationsDocumented","type":"Property"},{"localId":"80","locator":"59:86-59:121","path":"relevantPeriod","scope":"MedicationsDocumented","type":"Property"}]},{"localId":"83","locator":"59:132-59:165","path":"relevantPeriod","scope":"QualifyingEncounter","type":"Property"}]}}]}}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"SDE Ethnicity\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Ethnicity\": "}]},{"children":[{"children":[{"text":"\"Ethnicity\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"18"}],"ref_id":"19"}],"define_name":"SDE Ethnicity"},{"children":[{"children":[{"children":[{"text":"define \"SDE Payer\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Payer\": "}]},{"children":[{"children":[{"text":"\"Payer\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"20"}],"ref_id":"21"}],"define_name":"SDE Payer"},{"children":[{"children":[{"children":[{"text":"define \"SDE Race\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Race\": "}]},{"children":[{"children":[{"text":"\"Race\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"22"}],"ref_id":"23"}],"define_name":"SDE Race"},{"children":[{"children":[{"children":[{"text":"define \"SDE Sex\":\n  "}]},{"children":[{"children":[{"text":"[\"Patient Characteristic Sex\": "}]},{"children":[{"children":[{"text":"\"ONC Administrative Sex\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"24"}],"ref_id":"25"}],"define_name":"SDE Sex"},{"children":[{"children":[{"children":[{"text":"define \"Qualifying Encounter during Measurement Period\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter to Document Medications\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"26"}],"node_type":"Retrieve","ref_id":"26"},{"children":[{"text":" ValidEncounter"}]}],"ref_id":"27"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"ValidEncounter"}]}],"ref_id":"28"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"29"}],"node_type":"Property","ref_id":"29"},{"children":[{"text":" during "}],"ref_id":"31"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"30"}],"ref_id":"31"}],"ref_id":"31"}],"node_type":"Query","ref_id":"32"}],"ref_id":"33"}],"define_name":"Qualifying Encounter during Measurement Period"},{"children":[{"children":[{"children":[{"text":"define \"Initial Population\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Qualifying Encounter during Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"34"},{"children":[{"text":" QualifyingEncounter"}]}],"ref_id":"35"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"children":[{"text":"[\"Patient Characteristic Birthdate\": "}]},{"children":[{"children":[{"text":"\"Birth date\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"36"}],"node_type":"Retrieve","ref_id":"36"},{"children":[{"text":" BirthDate"}]}],"ref_id":"37"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"38"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"CalendarAgeInYearsAt\" ( "}]},{"children":[{"children":[{"children":[{"text":"BirthDate"}]}],"ref_id":"39"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"birthDatetime"}]}],"node_type":"Property","ref_id":"40"}],"node_type":"Property","ref_id":"40"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"41"}],"node_type":"Start","ref_id":"42"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"43"}],"node_type":"FunctionRef","ref_id":"43"},{"children":[{"text":" \u003e= 18"}],"node_type":"Literal","ref_id":"44"}],"node_type":"GreaterOrEqual","ref_id":"45"}],"ref_id":"46"}],"node_type":"Query","ref_id":"47"}],"ref_id":"48"}],"define_name":"Initial Population"},{"children":[{"children":[{"children":[{"text":"define \"Denominator\":\n  "}]},{"children":[{"children":[{"text":"\"Initial Population\""}]}],"node_type":"ExpressionRef","ref_id":"49"}],"ref_id":"50"}],"define_name":"Denominator"},{"children":[{"children":[{"children":[{"text":"define \"Denominator Exceptions\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Qualifying Encounter during Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"51"},{"children":[{"text":" QualifyingEncounter"}]}],"ref_id":"52"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"[\"Procedure, Not Performed\": "}]},{"children":[{"children":[{"text":"\"Documentation of current medications (procedure)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"53"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Intervention, Not Performed\": "}]},{"children":[{"children":[{"text":"\"Documentation of current medications (procedure)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"54"}],"node_type":"Union","ref_id":"55"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"55"},{"children":[{"text":" MedicationsNotDocumented"}]}],"ref_id":"56"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"MedicationsNotDocumented"}]}],"ref_id":"57"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"authorDatetime"}]}],"node_type":"Property","ref_id":"58"}],"node_type":"Property","ref_id":"58"},{"children":[{"text":" during "}],"node_type":"In","ref_id":"61"},{"children":[{"children":[{"children":[{"text":"QualifyingEncounter"}]}],"ref_id":"59"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"60"}],"node_type":"Property","ref_id":"60"}],"node_type":"In","ref_id":"61"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"MedicationsNotDocumented"}]}],"ref_id":"62"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"negationRationale"}]}],"ref_id":"63"}],"ref_id":"63"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Medical Reason\""}]}],"ref_id":"64"}],"node_type":"InValueSet","ref_id":"65"}],"node_type":"And","ref_id":"66"}],"ref_id":"67"}],"node_type":"Query","ref_id":"68"}],"ref_id":"69"}],"define_name":"Denominator Exceptions"},{"children":[{"children":[{"children":[{"text":"define \"Numerator\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"\"Qualifying Encounter during Measurement Period\""}]}]}],"node_type":"ExpressionRef","ref_id":"70"},{"children":[{"text":" QualifyingEncounter"}]}],"ref_id":"71"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"with "}]},{"children":[{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"text":"[\"Procedure, Performed\": "}]},{"children":[{"children":[{"text":"\"Documentation of current medications (procedure)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"72"},{"children":[{"text":"\n      union "}]},{"children":[{"children":[{"text":"[\"Intervention, Performed\": "}]},{"children":[{"children":[{"text":"\"Documentation of current medications (procedure)\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"73"}],"node_type":"Union","ref_id":"74"},{"children":[{"text":" )"}]}],"node_type":"Union","ref_id":"74"},{"children":[{"text":" MedicationsDocumented"}]}],"ref_id":"75"},{"children":[{"text":"\n      such that "}]},{"children":[{"children":[{"children":[{"children":[{"text":"Global"}]}],"ref_id":"76"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"\"NormalizeInterval\" ( "}]},{"children":[{"children":[{"children":[{"text":"MedicationsDocumented"}]}],"ref_id":"77"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantDatetime"}]}],"node_type":"Property","ref_id":"78"}],"node_type":"Property","ref_id":"78"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"MedicationsDocumented"}]}],"ref_id":"79"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"80"}],"node_type":"Property","ref_id":"80"},{"children":[{"text":" )"}]}],"node_type":"FunctionRef","ref_id":"81"}],"node_type":"FunctionRef","ref_id":"81"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"84"},{"children":[{"children":[{"children":[{"text":"QualifyingEncounter"}]}],"ref_id":"82"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"83"}],"node_type":"Property","ref_id":"83"}],"node_type":"IncludedIn","ref_id":"84"}],"ref_id":"85"}],"node_type":"Query","ref_id":"86"}],"ref_id":"87"}],"define_name":"Numerator"}],"identifier":{"id":"DocumentationofCurrentMedications","version":"11.0.000"}},"is_main_library":true,"is_top_level":true,"library_name":"DocumentationofCurrentMedications","library_version":"11.0.000","statement_dependencies":[{"_id":{"$oid":"6260c30dc6e47bee42d97b33"},"statement_name":"Patient"},{"_id":{"$oid":"6260c30dc6e47bee42d97b34"},"statement_name":"SDE Ethnicity"},{"_id":{"$oid":"6260c30dc6e47bee42d97b35"},"statement_name":"SDE Payer"},{"_id":{"$oid":"6260c30dc6e47bee42d97b36"},"statement_name":"SDE Race"},{"_id":{"$oid":"6260c30dc6e47bee42d97b37"},"statement_name":"SDE Sex"},{"_id":{"$oid":"6260c30dc6e47bee42d97b38"},"statement_name":"Qualifying Encounter during Measurement Period"},{"_id":{"$oid":"6260c30dc6e47bee42d97b39"},"statement_name":"Initial Population","statement_references":[{"_id":{"$oid":"6260c30dc6e47bee42d97b3a"},"hqmf_id":null,"library_name":"DocumentationofCurrentMedications","statement_name":"Qualifying Encounter during Measurement Period"},{"_id":{"$oid":"6260c30dc6e47bee42d97b3b"},"hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"CalendarAgeInYearsAt"}]},{"_id":{"$oid":"6260c30dc6e47bee42d97b3c"},"statement_name":"Denominator","statement_references":[{"_id":{"$oid":"6260c30dc6e47bee42d97b3d"},"hqmf_id":null,"library_name":"DocumentationofCurrentMedications","statement_name":"Initial Population"}]},{"_id":{"$oid":"6260c30dc6e47bee42d97b3e"},"statement_name":"Denominator Exceptions","statement_references":[{"_id":{"$oid":"6260c30dc6e47bee42d97b3f"},"hqmf_id":null,"library_name":"DocumentationofCurrentMedications","statement_name":"Qualifying Encounter during Measurement Period"}]},{"_id":{"$oid":"6260c30dc6e47bee42d97b40"},"statement_name":"Numerator","statement_references":[{"_id":{"$oid":"6260c30dc6e47bee42d97b41"},"hqmf_id":null,"library_name":"DocumentationofCurrentMedications","statement_name":"Qualifying Encounter during Measurement Period"},{"_id":{"$oid":"6260c30dc6e47bee42d97b42"},"hqmf_id":null,"library_name":"MATGlobalCommonFunctions","statement_name":"NormalizeInterval"}]}]},{"_id":{"$oid":"6260c30dc6e47bee42d97b43"},"cql":"library MATGlobalCommonFunctions version '6.2.000'\n\n/*This is an interim version for use prior to AU 2020 release.  We anticipate another release for inclusion with the program measures in Spring 2020*/\n\nusing QDM version '5.5'\n\nvalueset \"Emergency Department Visit\": 'urn:oid:2.16.840.1.113883.3.117.1.7.1.292' \nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307' \nvalueset \"Intensive Care Unit\": 'urn:oid:2.16.840.1.113762.1.4.1029.206' \nvalueset \"Observation Services\": 'urn:oid:2.16.840.1.113762.1.4.1111.143' \nvalueset \"Outpatient Surgery Service\": 'urn:oid:2.16.840.1.113762.1.4.1110.38' \n\nparameter \"Measurement Period\" Interval\u003cDateTime\u003e\n\ncontext Patient\n\ndefine \"ED Encounter\":\n  [\"Encounter, Performed\": \"Emergency Department Visit\"]\n\ndefine \"Inpatient Encounter\":\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] EncounterInpatient\n    where \"LengthInDays\"(EncounterInpatient.relevantPeriod)\u003c= 120\n      and EncounterInpatient.relevantPeriod ends during day of \"Measurement Period\"\n\n/*CalendarAgeInDaysAt calculates the calendar age (meaning the age without considering time components) in days.*/\ndefine function \"CalendarAgeInDaysAt\"(BirthDateTime DateTime, AsOf DateTime ):\n  days between ToDate(BirthDateTime)and ToDate(AsOf)\n\n/*CalendarAgeInDays calculates the calendar age (meaning the age without considering time components) in days as of today*/\ndefine function \"CalendarAgeInDays\"(BirthDateTime DateTime ):\n  CalendarAgeInDaysAt(BirthDateTime, Today())\n\n/*CalendarAgeInMonthsAt calculates the calendar age (meaning the age without considering time components) in months.*/\ndefine function \"CalendarAgeInMonthsAt\"(BirthDateTime DateTime, AsOf DateTime ):\n  months between ToDate(BirthDateTime)and ToDate(AsOf)\n\n/*CalendarAgeInMonths calculates the calendar age (meaning the age without considering time components) in months as of today.*/\ndefine function \"CalendarAgeInMonths\"(BirthDateTime DateTime ):\n  CalendarAgeInMonthsAt(BirthDateTime, Today())\n\n/*CalendarAgeInYearsAt calculates the calendar age (meaning the age without considering time components) in years.*/\ndefine function \"CalendarAgeInYearsAt\"(BirthDateTime DateTime, AsOf DateTime ):\n  years between ToDate(BirthDateTime)and ToDate(AsOf)\n\n/*CalendarAgeInYears calculates the calendar age (meaning the age without considering time components) in years as of today.*/\ndefine function \"CalendarAgeInYears\"(BirthDateTime DateTime ):\n  CalendarAgeInYearsAt(BirthDateTime, Today())\n\n/*calculates the difference in calendar days between the start and end of the given interval.*/\ndefine function \"LengthInDays\"(Value Interval\u003cDateTime\u003e ):\n  difference in days between start of Value and end of Value\n\n/* returns list of all locations within an encounter, including locations for immediately prior ED visit. */\ndefine function \"HospitalizationLocations\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn if EDVisit is null then Visit.facilityLocations \n  \t\telse flatten { EDVisit.facilityLocations, Visit.facilityLocations }\n\n/*Returns the arrival time in the ED for the encounter.  \n*/\ndefine function \"EmergencyDepartmentArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\twhere HospitalLocation.code in \"Emergency Department Visit\"\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Returns admission time for an encounter or for immediately prior emergency department visit.  */\ndefine function \"HospitalAdmissionTime\"(Encounter \"Encounter, Performed\" ):\n  start of \"Hospitalization\"(Encounter)\n\n/*Returns earliest arrival time for an encounter including any prior ED visit. */\ndefine function \"HospitalArrivalTime\"(Encounter \"Encounter, Performed\" ):\n  start of First((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospitalization returns the total interval for admission to discharge for the given encounter, or for the admission of any immediately prior emergency department visit to the discharge of the given encounter.*/\ndefine function \"Hospitalization\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet EDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, start of Visit.relevantPeriod), \n  \tend of Visit.relevantPeriod]\n\n/*Returns the length of stay in days (i.e. the number of days between admission and discharge) for the given encounter, or from the admission of any immediately prior emergency department visit to the discharge of the encounter*/\ndefine function \"HospitalizationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  LengthInDays(\"Hospitalization\"(Encounter))\n\n/*Returns the latest departure time for encounter including any prior ED visit. */\ndefine function \"HospitalDepartureTime\"(Encounter \"Encounter, Performed\" ):\n  end of Last((\"HospitalizationLocations\"(Encounter))HospitalLocation\n  \t\tsort by start of locationPeriod\n  ).locationPeriod\n\n/*Hospital Discharge Time returns the discharge time for an encounter*/\ndefine function \"HospitalDischargeTime\"(Encounter \"Encounter, Performed\" ):\n  end of Encounter.relevantPeriod\n\n/*Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.*/\ndefine function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStartWithED: Coalesce(start of EDVisit.relevantPeriod, VisitStart),\n  \tOutpatientSurgeryVisit: Last([\"Encounter, Performed\": \"Outpatient Surgery Service\"] LastSurgeryOP\n  \t\t\twhere LastSurgeryOP.relevantPeriod ends 1 hour or less on or before VisitStartWithED\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.relevantPeriod, VisitStartWithED), \n  \tend of Visit.relevantPeriod]\n\n/*Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservation\"(Encounter \"Encounter, Performed\" ):\n  Encounter Visit\n  \tlet ObsVisit: Last([\"Encounter, Performed\": \"Observation Services\"] LastObs\n  \t\t\twhere LastObs.relevantPeriod ends 1 hour or less on or before start of Visit.relevantPeriod\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t),\n  \tVisitStart: Coalesce(start of ObsVisit.relevantPeriod, start of Visit.relevantPeriod),\n  \tEDVisit: Last([\"Encounter, Performed\": \"Emergency Department Visit\"] LastED\n  \t\t\twhere LastED.relevantPeriod ends 1 hour or less on or before VisitStart\n  \t\t\tsort by \n  \t\t\tend of relevantPeriod\n  \t)\n  \treturn Interval[Coalesce(start of EDVisit.relevantPeriod, VisitStart), \n  \tend of Visit.relevantPeriod]\n\n/*ToDate takes a given DateTime value and returns a DateTime with the time components \"zeroed\", and the timezone of the input value, for example, given the DateTime @2012-01-01T06:30:00.0Z, this function will return @2012-01-01T00:00:00.0Z.*/\ndefine function \"ToDate\"(Value DateTime ):\n  DateTime(year from Value, month from Value, day from Value, 0, 0, 0, 0, timezoneoffset from Value)\n\n/*Hospitalization with Observation Length of Stay returns the length in days from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter*/\ndefine function \"HospitalizationWithObservationLengthofStay\"(Encounter \"Encounter, Performed\" ):\n  \"LengthInDays\"(\"HospitalizationWithObservation\"(Encounter))\n\n/*First Inpatient Intensive Care Unit returns the first intensive care unit for the given encounter, without considering any immediately prior emergency department visit.*/\ndefine function \"FirstInpatientIntensiveCareUnit\"(Encounter \"Encounter, Performed\" ):\n  First((Encounter.facilityLocations)HospitalLocation\n      where HospitalLocation.code in \"Intensive Care Unit\"\n        and HospitalLocation.locationPeriod during Encounter.relevantPeriod\n      sort by start of locationPeriod\n  )\n\n/*Given a datetime and a period, returns the period (if a period is provided) or the interval beginning and ending on the datetime (if a datetime is provided)*/\ndefine function \"NormalizeInterval\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  if pointInTime is not null then Interval[pointInTime, pointInTime]\n    else if period is not null then period \n    else null as Interval\u003cDateTime\u003e\n\n/*Given an interval, return true if the interval has a starting boundary specified (i.e. the start of the interval is not null and not the minimum DateTime value)*/\ndefine function \"HasStart\"(period Interval\u003cDateTime\u003e ):\n  not ( start of period is null\n      or start of period = minimum DateTime\n  )\n\n/*Given an interval, return true if the interval has an ending boundary specified (i.e. the end of the interval is not null and not the maximum DateTime value)*/\ndefine function \"HasEnd\"(period Interval\u003cDateTime\u003e ):\n  not ( \n    end of period is null\n      or \n      end of period = maximum DateTime\n  )\n\n/*Given an interval, return the ending point if the interval has an ending boundary specified, otherwise, return the starting point*/\ndefine function \"Latest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasEnd(period)) then \n  end of period \n    else start of period\n\n/*Given an interval, return the starting point if the interval has a starting boundary specified, otherwise, return the ending point*/\ndefine function \"Earliest\"(period Interval\u003cDateTime\u003e ):\n  if ( HasStart(period)) then start of period \n    else \n  end of period\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the ending point of the period if the period has an ending boundary specified, otherwise returns the starting point of the interval*/\ndefine function \"LatestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Latest(NormalizeInterval(pointInTime, period))\n\n/*Given a pointInTime or period, if the pointInTime is specified, returns the pointInTime, returns the starting point of the period if the period has a starting boundary specified, otherwise returns the ending point of the period*/\ndefine function \"EarliestOf\"(pointInTime DateTime, period Interval\u003cDateTime\u003e ):\n  Earliest(NormalizeInterval(pointInTime, period))\n\n","elm":{"library":{"identifier":{"id":"MATGlobalCommonFunctions","version":"6.2.000"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localId":"1","locator":"5:1-5:23","localIdentifier":"QDM","uri":"urn:healthit-gov:qdm:v5_5","version":"5.5"}]},"parameters":{"def":[{"localId":"9","locator":"13:1-13:49","name":"Measurement Period","accessLevel":"Public","parameterTypeSpecifier":{"localId":"8","locator":"13:32-13:49","type":"IntervalTypeSpecifier","pointType":{"localId":"7","locator":"13:41-13:48","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},"valueSets":{"def":[{"localId":"2","locator":"7:1-7:82","name":"Emergency Department Visit","id":"2.16.840.1.113883.3.117.1.7.1.292","accessLevel":"Public"},{"localId":"3","locator":"8:1-8:71","name":"Encounter Inpatient","id":"2.16.840.1.113883.3.666.5.307","accessLevel":"Public"},{"localId":"4","locator":"9:1-9:72","name":"Intensive Care Unit","id":"2.16.840.1.113762.1.4.1029.206","accessLevel":"Public"},{"localId":"5","locator":"10:1-10:73","name":"Observation Services","id":"2.16.840.1.113762.1.4.1111.143","accessLevel":"Public"},{"localId":"6","locator":"11:1-11:78","name":"Outpatient Surgery Service","id":"2.16.840.1.113762.1.4.1110.38","accessLevel":"Public"}]},"statements":{"def":[{"locator":"15:1-15:15","name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"locator":"15:1-15:15","dataType":"{urn:healthit-gov:qdm:v5_5}Patient","templateId":"Patient","type":"Retrieve"}}},{"localId":"11","locator":"17:1-18:56","name":"ED Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"11","s":[{"value":["define ","\"ED Encounter\"",":\n  "]},{"r":"10","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]}}],"expression":{"localId":"10","locator":"18:3-18:56","dataType":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","type":"Retrieve","codes":{"locator":"18:28-18:55","name":"Emergency Department Visit","type":"ValueSetRef"}}},{"localId":"23","locator":"50:1-51:60","name":"LengthInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"23","s":[{"value":["define function ","\"LengthInDays\"","(","Value"," "]},{"r":"17","s":[{"value":["Interval\u003c"]},{"r":"16","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"22","s":[{"r":"22","s":[{"value":["difference in days between "]},{"r":"19","s":[{"value":["start of "]},{"r":"18","s":[{"value":["Value"]}]}]},{"value":[" and "]},{"r":"21","s":[{"value":["end of "]},{"r":"20","s":[{"value":["Value"]}]}]}]}]}]}}],"expression":{"localId":"22","locator":"51:3-51:60","precision":"Day","type":"DifferenceBetween","operand":[{"localId":"19","locator":"51:30-51:43","type":"Start","operand":{"localId":"18","locator":"51:39-51:43","name":"Value","type":"OperandRef"}},{"localId":"21","locator":"51:49-51:60","type":"End","operand":{"localId":"20","locator":"51:56-51:60","name":"Value","type":"OperandRef"}}]},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"17","locator":"50:38-50:55","type":"IntervalTypeSpecifier","pointType":{"localId":"16","locator":"50:47-50:54","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"33","locator":"20:1-23:83","name":"Inpatient Encounter","context":"Patient","accessLevel":"Public","annotation":[{"type":"Annotation","s":{"r":"33","s":[{"value":["define ","\"Inpatient Encounter\"",":\n  "]},{"r":"32","s":[{"s":[{"r":"13","s":[{"r":"12","s":[{"r":"12","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Encounter Inpatient\""]}]},{"value":["]"]}]}]},{"value":[" ","EncounterInpatient"]}]}]},{"value":["\n    "]},{"r":"31","s":[{"value":["where "]},{"r":"31","s":[{"r":"26","s":[{"r":"24","s":[{"value":["\"LengthInDays\"","("]},{"r":"15","s":[{"r":"14","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"15","s":[{"value":["relevantPeriod"]}]}]},{"value":[")"]}]},{"r":"25","value":["\u003c="," ","120"]}]},{"value":["\n      and "]},{"r":"30","s":[{"r":"28","s":[{"r":"27","s":[{"value":["EncounterInpatient"]}]},{"value":["."]},{"r":"28","s":[{"value":["relevantPeriod"]}]}]},{"r":"30","value":[" ","ends during day of"," "]},{"r":"29","s":[{"value":["\"Measurement Period\""]}]}]}]}]}]}]}}],"expression":{"localId":"32","locator":"21:3-23:83","type":"Query","source":[{"localId":"13","locator":"21:3-21:68","alias":"EncounterInpatient","expression":{"localId":"12","locator":"21:3-21:49","dataType":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","type":"Retrieve","codes":{"locator":"21:28-21:48","name":"Encounter Inpatient","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"31","locator":"22:5-23:83","type":"And","operand":[{"localId":"26","locator":"22:11-22:65","type":"LessOrEqual","operand":[{"localId":"24","locator":"22:11-22:59","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"15","locator":"22:26-22:58","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}]},{"localId":"25","locator":"22:63-22:65","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"120","type":"Literal"}]},{"localId":"30","locator":"23:11-23:83","precision":"Day","type":"In","operand":[{"locator":"23:45-23:48","type":"End","operand":{"localId":"28","locator":"23:11-23:43","path":"relevantPeriod","scope":"EncounterInpatient","type":"Property"}},{"localId":"29","locator":"23:64-23:83","name":"Measurement Period","type":"ParameterRef"}]}]}}},{"localId":"41","locator":"26:1-27:52","name":"CalendarAgeInDaysAt","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"41","s":[{"value":["define function ","\"CalendarAgeInDaysAt\"","(","BirthDateTime"," "]},{"r":"34","s":[{"value":["DateTime"]}]},{"value":[", ","AsOf"," "]},{"r":"35","s":[{"value":["DateTime"]}]},{"value":[" ):\n  "]},{"r":"40","s":[{"r":"40","s":[{"value":["days between "]},{"r":"37","s":[{"value":["ToDate","("]},{"r":"36","s":[{"value":["BirthDateTime"]}]},{"value":[")"]}]},{"value":["and "]},{"r":"39","s":[{"value":["ToDate","("]},{"r":"38","s":[{"value":["AsOf"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"40","locator":"27:3-27:52","precision":"Day","type":"DurationBetween","operand":[{"localId":"37","locator":"27:16-27:36","type":"ToDate","operand":{"localId":"36","locator":"27:23-27:35","name":"BirthDateTime","type":"OperandRef"}},{"localId":"39","locator":"27:41-27:52","type":"ToDate","operand":{"localId":"38","locator":"27:48-27:51","name":"AsOf","type":"OperandRef"}}]},"operand":[{"name":"BirthDateTime","operandTypeSpecifier":{"localId":"34","locator":"26:53-26:60","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"AsOf","operandTypeSpecifier":{"localId":"35","locator":"26:68-26:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}]},{"localId":"46","locator":"30:1-31:45","name":"CalendarAgeInDays","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"46","s":[{"value":["define function ","\"CalendarAgeInDays\"","(","BirthDateTime"," "]},{"r":"42","s":[{"value":["DateTime"]}]},{"value":[" ):\n  "]},{"r":"45","s":[{"r":"45","s":[{"value":["CalendarAgeInDaysAt","("]},{"r":"43","s":[{"value":["BirthDateTime"]}]},{"value":[", "]},{"r":"44","s":[{"value":["Today","()"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"45","locator":"31:3-31:45","name":"CalendarAgeInDaysAt","type":"FunctionRef","operand":[{"localId":"43","locator":"31:23-31:35","name":"BirthDateTime","type":"OperandRef"},{"type":"ToDateTime","operand":{"localId":"44","locator":"31:38-31:44","type":"Today"}}]},"operand":[{"name":"BirthDateTime","operandTypeSpecifier":{"localId":"42","locator":"30:51-30:58","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}]},{"localId":"54","locator":"34:1-35:54","name":"CalendarAgeInMonthsAt","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"54","s":[{"value":["define function ","\"CalendarAgeInMonthsAt\"","(","BirthDateTime"," "]},{"r":"47","s":[{"value":["DateTime"]}]},{"value":[", ","AsOf"," "]},{"r":"48","s":[{"value":["DateTime"]}]},{"value":[" ):\n  "]},{"r":"53","s":[{"r":"53","s":[{"value":["months between "]},{"r":"50","s":[{"value":["ToDate","("]},{"r":"49","s":[{"value":["BirthDateTime"]}]},{"value":[")"]}]},{"value":["and "]},{"r":"52","s":[{"value":["ToDate","("]},{"r":"51","s":[{"value":["AsOf"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"53","locator":"35:3-35:54","precision":"Month","type":"DurationBetween","operand":[{"localId":"50","locator":"35:18-35:38","type":"ToDate","operand":{"localId":"49","locator":"35:25-35:37","name":"BirthDateTime","type":"OperandRef"}},{"localId":"52","locator":"35:43-35:54","type":"ToDate","operand":{"localId":"51","locator":"35:50-35:53","name":"AsOf","type":"OperandRef"}}]},"operand":[{"name":"BirthDateTime","operandTypeSpecifier":{"localId":"47","locator":"34:55-34:62","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"AsOf","operandTypeSpecifier":{"localId":"48","locator":"34:70-34:77","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}]},{"localId":"59","locator":"38:1-39:47","name":"CalendarAgeInMonths","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"59","s":[{"value":["define function ","\"CalendarAgeInMonths\"","(","BirthDateTime"," "]},{"r":"55","s":[{"value":["DateTime"]}]},{"value":[" ):\n  "]},{"r":"58","s":[{"r":"58","s":[{"value":["CalendarAgeInMonthsAt","("]},{"r":"56","s":[{"value":["BirthDateTime"]}]},{"value":[", "]},{"r":"57","s":[{"value":["Today","()"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"58","locator":"39:3-39:47","name":"CalendarAgeInMonthsAt","type":"FunctionRef","operand":[{"localId":"56","locator":"39:25-39:37","name":"BirthDateTime","type":"OperandRef"},{"type":"ToDateTime","operand":{"localId":"57","locator":"39:40-39:46","type":"Today"}}]},"operand":[{"name":"BirthDateTime","operandTypeSpecifier":{"localId":"55","locator":"38:53-38:60","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}]},{"localId":"67","locator":"42:1-43:53","name":"CalendarAgeInYearsAt","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"67","s":[{"value":["define function ","\"CalendarAgeInYearsAt\"","(","BirthDateTime"," "]},{"r":"60","s":[{"value":["DateTime"]}]},{"value":[", ","AsOf"," "]},{"r":"61","s":[{"value":["DateTime"]}]},{"value":[" ):\n  "]},{"r":"66","s":[{"r":"66","s":[{"value":["years between "]},{"r":"63","s":[{"value":["ToDate","("]},{"r":"62","s":[{"value":["BirthDateTime"]}]},{"value":[")"]}]},{"value":["and "]},{"r":"65","s":[{"value":["ToDate","("]},{"r":"64","s":[{"value":["AsOf"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"66","locator":"43:3-43:53","precision":"Year","type":"DurationBetween","operand":[{"localId":"63","locator":"43:17-43:37","type":"ToDate","operand":{"localId":"62","locator":"43:24-43:36","name":"BirthDateTime","type":"OperandRef"}},{"localId":"65","locator":"43:42-43:53","type":"ToDate","operand":{"localId":"64","locator":"43:49-43:52","name":"AsOf","type":"OperandRef"}}]},"operand":[{"name":"BirthDateTime","operandTypeSpecifier":{"localId":"60","locator":"42:54-42:61","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"AsOf","operandTypeSpecifier":{"localId":"61","locator":"42:69-42:76","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}]},{"localId":"72","locator":"46:1-47:46","name":"CalendarAgeInYears","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"72","s":[{"value":["define function ","\"CalendarAgeInYears\"","(","BirthDateTime"," "]},{"r":"68","s":[{"value":["DateTime"]}]},{"value":[" ):\n  "]},{"r":"71","s":[{"r":"71","s":[{"value":["CalendarAgeInYearsAt","("]},{"r":"69","s":[{"value":["BirthDateTime"]}]},{"value":[", "]},{"r":"70","s":[{"value":["Today","()"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"71","locator":"47:3-47:46","name":"CalendarAgeInYearsAt","type":"FunctionRef","operand":[{"localId":"69","locator":"47:24-47:36","name":"BirthDateTime","type":"OperandRef"},{"type":"ToDateTime","operand":{"localId":"70","locator":"47:39-47:45","type":"Today"}}]},"operand":[{"name":"BirthDateTime","operandTypeSpecifier":{"localId":"68","locator":"46:52-46:59","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}]},{"localId":"108","locator":"54:1-62:71","name":"HospitalizationLocations","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"108","s":[{"value":["define function ","\"HospitalizationLocations\"","(","Encounter"," "]},{"r":"76","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"107","s":[{"r":"107","s":[{"s":[{"r":"78","s":[{"r":"77","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"94","s":[{"value":["EDVisit",": "]},{"r":"93","s":[{"value":["Last","("]},{"r":"92","s":[{"s":[{"r":"80","s":[{"r":"79","s":[{"r":"79","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"87","s":[{"value":["where "]},{"r":"87","s":[{"r":"82","s":[{"r":"81","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"82","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"87","s":[{"value":["ends "]},{"r":"86","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"85","s":[{"value":["start of "]},{"r":"84","s":[{"r":"83","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"84","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"91","s":[{"value":["sort by \n  \t\t\t"]},{"r":"90","s":[{"r":"89","s":[{"value":["end of "]},{"r":"88","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"106","s":[{"value":["return "]},{"r":"105","s":[{"value":["if "]},{"r":"96","s":[{"r":"95","s":[{"value":["EDVisit"]}]},{"value":[" is null"]}]},{"value":[" then "]},{"r":"98","s":[{"r":"97","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"98","s":[{"value":["facilityLocations"]}]}]},{"value":[" \n  \t\telse "]},{"r":"104","s":[{"value":["flatten "]},{"r":"103","s":[{"value":["{ "]},{"r":"100","s":[{"r":"99","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"100","s":[{"value":["facilityLocations"]}]}]},{"value":[", "]},{"r":"102","s":[{"r":"101","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"102","s":[{"value":["facilityLocations"]}]}]},{"value":[" }"]}]}]}]}]}]}]}]}}],"expression":{"localId":"107","locator":"55:3-62:71","type":"Query","source":[{"localId":"78","locator":"55:3-55:17","alias":"Visit","expression":{"localId":"77","locator":"55:3-55:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"94","locator":"56:8-60:4","identifier":"EDVisit","expression":{"localId":"93","locator":"56:17-60:4","type":"Last","source":{"localId":"92","locator":"56:22-59:26","type":"Query","source":[{"localId":"80","locator":"56:22-56:82","alias":"LastED","expression":{"localId":"79","locator":"56:22-56:75","dataType":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","type":"Retrieve","codes":{"locator":"56:47-56:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"87","locator":"57:6-57:95","type":"And","operand":[{"locator":"57:39-57:52","type":"In","operand":[{"locator":"57:34-57:37","type":"End","operand":{"localId":"82","locator":"57:12-57:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"57:39-57:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"57:67-57:95","type":"Subtract","operand":[{"localId":"85","locator":"57:67-57:95","type":"Start","operand":{"localId":"84","locator":"57:76-57:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"86","locator":"57:39-57:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"85","locator":"57:67-57:95","type":"Start","operand":{"localId":"84","locator":"57:76-57:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"57:39-57:52","type":"Not","operand":{"locator":"57:39-57:52","type":"IsNull","operand":{"localId":"85","locator":"57:67-57:95","type":"Start","operand":{"localId":"84","locator":"57:76-57:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"91","locator":"58:6-59:26","by":[{"localId":"90","locator":"59:6-59:26","direction":"asc","type":"ByExpression","expression":{"localId":"89","locator":"59:6-59:26","type":"End","operand":{"localId":"88","locator":"59:13-59:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"106","locator":"61:4-62:71","expression":{"localId":"105","locator":"61:11-62:71","type":"If","condition":{"asType":"{urn:hl7-org:elm-types:r1}Boolean","type":"As","operand":{"localId":"96","locator":"61:14-61:28","type":"IsNull","operand":{"localId":"95","locator":"61:14-61:20","name":"EDVisit","type":"QueryLetRef"}}},"then":{"localId":"98","locator":"61:35-61:57","path":"facilityLocations","scope":"Visit","type":"Property"},"else":{"localId":"104","locator":"62:10-62:71","type":"Flatten","operand":{"localId":"103","locator":"62:18-62:71","type":"List","element":[{"localId":"100","locator":"62:20-62:44","path":"facilityLocations","type":"Property","source":{"localId":"99","locator":"62:20-62:26","name":"EDVisit","type":"QueryLetRef"}},{"localId":"102","locator":"62:47-62:69","path":"facilityLocations","scope":"Visit","type":"Property"}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"76","locator":"54:54-54:75","name":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"125","locator":"66:1-70:18","name":"EmergencyDepartmentArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"125","s":[{"value":["define function ","\"EmergencyDepartmentArrivalTime\"","(","Encounter"," "]},{"r":"109","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"124","s":[{"r":"124","s":[{"value":["start of "]},{"r":"123","s":[{"r":"122","s":[{"value":["First","("]},{"r":"121","s":[{"s":[{"r":"112","s":[{"r":"111","s":[{"value":["("]},{"r":"111","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"110","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"116","s":[{"value":["where "]},{"r":"116","s":[{"r":"114","s":[{"r":"113","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"114","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"115","s":[{"value":["\"Emergency Department Visit\""]}]}]}]},{"value":["\n  \t\t"]},{"r":"120","s":[{"value":["sort by "]},{"r":"119","s":[{"r":"118","s":[{"value":["start of "]},{"r":"117","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"123","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"124","locator":"67:3-70:18","type":"Start","operand":{"localId":"123","locator":"67:12-70:18","path":"locationPeriod","type":"Property","source":{"localId":"122","locator":"67:12-70:3","type":"First","source":{"localId":"121","locator":"67:18-69:35","type":"Query","source":[{"localId":"112","locator":"67:18-67:72","alias":"HospitalLocation","expression":{"localId":"111","locator":"67:18-67:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"110","locator":"67:46-67:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"where":{"localId":"116","locator":"68:5-68:63","type":"InValueSet","code":{"localId":"114","locator":"68:11-68:31","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"115","locator":"68:36-68:63","name":"Emergency Department Visit"}},"sort":{"localId":"120","locator":"69:5-69:35","by":[{"localId":"119","locator":"69:13-69:35","direction":"asc","type":"ByExpression","expression":{"localId":"118","locator":"69:13-69:35","type":"Start","operand":{"localId":"117","locator":"69:22-69:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"109","locator":"66:60-66:81","name":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"160","locator":"83:1-91:31","name":"Hospitalization","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"160","s":[{"value":["define function ","\"Hospitalization\"","(","Encounter"," "]},{"r":"128","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"159","s":[{"r":"159","s":[{"s":[{"r":"130","s":[{"r":"129","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"146","s":[{"value":["EDVisit",": "]},{"r":"145","s":[{"value":["Last","("]},{"r":"144","s":[{"s":[{"r":"132","s":[{"r":"131","s":[{"r":"131","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"139","s":[{"value":["where "]},{"r":"139","s":[{"r":"134","s":[{"r":"133","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"134","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"139","s":[{"value":["ends "]},{"r":"138","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"137","s":[{"value":["start of "]},{"r":"136","s":[{"r":"135","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"136","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"143","s":[{"value":["sort by \n  \t\t\t"]},{"r":"142","s":[{"r":"141","s":[{"value":["end of "]},{"r":"140","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"158","s":[{"value":["return "]},{"r":"157","s":[{"value":["Interval["]},{"r":"153","s":[{"value":["Coalesce","("]},{"r":"149","s":[{"value":["start of "]},{"r":"148","s":[{"r":"147","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"148","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"152","s":[{"value":["start of "]},{"r":"151","s":[{"r":"150","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"151","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"156","s":[{"value":["end of "]},{"r":"155","s":[{"r":"154","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"155","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"159","locator":"84:3-91:31","type":"Query","source":[{"localId":"130","locator":"84:3-84:17","alias":"Visit","expression":{"localId":"129","locator":"84:3-84:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"146","locator":"85:8-89:4","identifier":"EDVisit","expression":{"localId":"145","locator":"85:17-89:4","type":"Last","source":{"localId":"144","locator":"85:22-88:26","type":"Query","source":[{"localId":"132","locator":"85:22-85:82","alias":"LastED","expression":{"localId":"131","locator":"85:22-85:75","dataType":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","type":"Retrieve","codes":{"locator":"85:47-85:74","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"139","locator":"86:6-86:95","type":"And","operand":[{"locator":"86:39-86:52","type":"In","operand":[{"locator":"86:34-86:37","type":"End","operand":{"localId":"134","locator":"86:12-86:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"86:39-86:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"86:67-86:95","type":"Subtract","operand":[{"localId":"137","locator":"86:67-86:95","type":"Start","operand":{"localId":"136","locator":"86:76-86:95","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"138","locator":"86:39-86:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"137","locator":"86:67-86:95","type":"Start","operand":{"localId":"136","locator":"86:76-86:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"86:39-86:52","type":"Not","operand":{"locator":"86:39-86:52","type":"IsNull","operand":{"localId":"137","locator":"86:67-86:95","type":"Start","operand":{"localId":"136","locator":"86:76-86:95","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"143","locator":"87:6-88:26","by":[{"localId":"142","locator":"88:6-88:26","direction":"asc","type":"ByExpression","expression":{"localId":"141","locator":"88:6-88:26","type":"End","operand":{"localId":"140","locator":"88:13-88:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"158","locator":"90:4-91:31","expression":{"localId":"157","locator":"90:11-91:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"153","locator":"90:20-90:91","type":"Coalesce","operand":[{"localId":"149","locator":"90:29-90:59","type":"Start","operand":{"localId":"148","locator":"90:38-90:59","path":"relevantPeriod","type":"Property","source":{"localId":"147","locator":"90:38-90:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"152","locator":"90:62-90:90","type":"Start","operand":{"localId":"151","locator":"90:71-90:90","path":"relevantPeriod","scope":"Visit","type":"Property"}}]},"high":{"localId":"156","locator":"91:4-91:30","type":"End","operand":{"localId":"155","locator":"91:11-91:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"128","locator":"83:45-83:66","name":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"163","locator":"73:1-74:39","name":"HospitalAdmissionTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"163","s":[{"value":["define function ","\"HospitalAdmissionTime\"","(","Encounter"," "]},{"r":"126","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"162","s":[{"r":"162","s":[{"value":["start of "]},{"r":"161","s":[{"value":["\"Hospitalization\"","("]},{"r":"127","s":[{"value":["Encounter"]}]},{"value":[")"]}]}]}]}]}}],"expression":{"localId":"162","locator":"74:3-74:39","type":"Start","operand":{"localId":"161","locator":"74:12-74:39","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"127","locator":"74:30-74:38","name":"Encounter","type":"OperandRef"}]}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"126","locator":"73:51-73:72","name":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"176","locator":"77:1-80:18","name":"HospitalArrivalTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"176","s":[{"value":["define function ","\"HospitalArrivalTime\"","(","Encounter"," "]},{"r":"164","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"175","s":[{"r":"175","s":[{"value":["start of "]},{"r":"174","s":[{"r":"173","s":[{"value":["First","("]},{"r":"172","s":[{"s":[{"r":"167","s":[{"r":"166","s":[{"value":["("]},{"r":"166","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"165","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"171","s":[{"value":["sort by "]},{"r":"170","s":[{"r":"169","s":[{"value":["start of "]},{"r":"168","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"174","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"175","locator":"78:3-80:18","type":"Start","operand":{"localId":"174","locator":"78:12-80:18","path":"locationPeriod","type":"Property","source":{"localId":"173","locator":"78:12-80:3","type":"First","source":{"localId":"172","locator":"78:18-79:35","type":"Query","source":[{"localId":"167","locator":"78:18-78:72","alias":"HospitalLocation","expression":{"localId":"166","locator":"78:18-78:56","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"165","locator":"78:46-78:54","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"171","locator":"79:5-79:35","by":[{"localId":"170","locator":"79:13-79:35","direction":"asc","type":"ByExpression","expression":{"localId":"169","locator":"79:13-79:35","type":"Start","operand":{"localId":"168","locator":"79:22-79:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"164","locator":"77:49-77:70","name":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"183","locator":"94:1-95:44","name":"HospitalizationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"183","s":[{"value":["define function ","\"HospitalizationLengthofStay\"","(","Encounter"," "]},{"r":"179","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"182","s":[{"r":"182","s":[{"value":["LengthInDays","("]},{"r":"181","s":[{"value":["\"Hospitalization\"","("]},{"r":"180","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"182","locator":"95:3-95:44","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"181","locator":"95:16-95:43","name":"Hospitalization","type":"FunctionRef","operand":[{"localId":"180","locator":"95:34-95:42","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"179","locator":"94:57-94:78","name":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"196","locator":"98:1-101:18","name":"HospitalDepartureTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"196","s":[{"value":["define function ","\"HospitalDepartureTime\"","(","Encounter"," "]},{"r":"184","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"195","s":[{"r":"195","s":[{"value":["end of "]},{"r":"194","s":[{"r":"193","s":[{"value":["Last","("]},{"r":"192","s":[{"s":[{"r":"187","s":[{"r":"186","s":[{"value":["("]},{"r":"186","s":[{"value":["\"HospitalizationLocations\"","("]},{"r":"185","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n  \t\t"]},{"r":"191","s":[{"value":["sort by "]},{"r":"190","s":[{"r":"189","s":[{"value":["start of "]},{"r":"188","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]},{"value":["."]},{"r":"194","s":[{"value":["locationPeriod"]}]}]}]}]}]}}],"expression":{"localId":"195","locator":"99:3-101:18","type":"End","operand":{"localId":"194","locator":"99:10-101:18","path":"locationPeriod","type":"Property","source":{"localId":"193","locator":"99:10-101:3","type":"Last","source":{"localId":"192","locator":"99:15-100:35","type":"Query","source":[{"localId":"187","locator":"99:15-99:69","alias":"HospitalLocation","expression":{"localId":"186","locator":"99:15-99:53","name":"HospitalizationLocations","type":"FunctionRef","operand":[{"localId":"185","locator":"99:43-99:51","name":"Encounter","type":"OperandRef"}]}}],"relationship":[],"sort":{"localId":"191","locator":"100:5-100:35","by":[{"localId":"190","locator":"100:13-100:35","direction":"asc","type":"ByExpression","expression":{"localId":"189","locator":"100:13-100:35","type":"Start","operand":{"localId":"188","locator":"100:22-100:35","name":"locationPeriod","type":"IdentifierRef"}}}]}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"184","locator":"98:51-98:72","name":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"201","locator":"104:1-105:33","name":"HospitalDischargeTime","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"201","s":[{"value":["define function ","\"HospitalDischargeTime\"","(","Encounter"," "]},{"r":"197","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"200","s":[{"r":"200","s":[{"value":["end of "]},{"r":"199","s":[{"r":"198","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"199","s":[{"value":["relevantPeriod"]}]}]}]}]}]}}],"expression":{"localId":"200","locator":"105:3-105:33","type":"End","operand":{"localId":"199","locator":"105:10-105:33","path":"relevantPeriod","type":"Property","source":{"localId":"198","locator":"105:10-105:18","name":"Encounter","type":"OperandRef"}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"197","locator":"104:51-104:72","name":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"274","locator":"108:1-128:31","name":"HospitalizationWithObservationAndOutpatientSurgeryService","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"274","s":[{"value":["define function ","\"HospitalizationWithObservationAndOutpatientSurgeryService\"","(","Encounter"," "]},{"r":"202","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"273","s":[{"r":"273","s":[{"s":[{"r":"204","s":[{"r":"203","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"220","s":[{"value":["ObsVisit",": "]},{"r":"219","s":[{"value":["Last","("]},{"r":"218","s":[{"s":[{"r":"206","s":[{"r":"205","s":[{"r":"205","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"213","s":[{"value":["where "]},{"r":"213","s":[{"r":"208","s":[{"r":"207","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"208","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"213","s":[{"value":["ends "]},{"r":"212","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"211","s":[{"value":["start of "]},{"r":"210","s":[{"r":"209","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"210","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"217","s":[{"value":["sort by \n  \t\t\t"]},{"r":"216","s":[{"r":"215","s":[{"value":["end of "]},{"r":"214","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"228","s":[{"value":["VisitStart",": "]},{"r":"227","s":[{"value":["Coalesce","("]},{"r":"223","s":[{"value":["start of "]},{"r":"222","s":[{"r":"221","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"222","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"226","s":[{"value":["start of "]},{"r":"225","s":[{"r":"224","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"225","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"242","s":[{"value":["EDVisit",": "]},{"r":"241","s":[{"value":["Last","("]},{"r":"240","s":[{"s":[{"r":"230","s":[{"r":"229","s":[{"r":"229","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"235","s":[{"value":["where "]},{"r":"235","s":[{"r":"232","s":[{"r":"231","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"232","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"235","s":[{"value":["ends "]},{"r":"234","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"233","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"239","s":[{"value":["sort by \n  \t\t\t"]},{"r":"238","s":[{"r":"237","s":[{"value":["end of "]},{"r":"236","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"248","s":[{"value":["VisitStartWithED",": "]},{"r":"247","s":[{"value":["Coalesce","("]},{"r":"245","s":[{"value":["start of "]},{"r":"244","s":[{"r":"243","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"244","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"246","s":[{"value":["VisitStart"]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"262","s":[{"value":["OutpatientSurgeryVisit",": "]},{"r":"261","s":[{"value":["Last","("]},{"r":"260","s":[{"s":[{"r":"250","s":[{"r":"249","s":[{"r":"249","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Outpatient Surgery Service\""]}]},{"value":["]"]}]}]},{"value":[" ","LastSurgeryOP"]}]}]},{"value":["\n  \t\t\t"]},{"r":"255","s":[{"value":["where "]},{"r":"255","s":[{"r":"252","s":[{"r":"251","s":[{"value":["LastSurgeryOP"]}]},{"value":["."]},{"r":"252","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"255","s":[{"value":["ends "]},{"r":"254","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"253","s":[{"value":["VisitStartWithED"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"259","s":[{"value":["sort by \n  \t\t\t"]},{"r":"258","s":[{"r":"257","s":[{"value":["end of "]},{"r":"256","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"272","s":[{"value":["return "]},{"r":"271","s":[{"value":["Interval["]},{"r":"267","s":[{"value":["Coalesce","("]},{"r":"265","s":[{"value":["start of "]},{"r":"264","s":[{"r":"263","s":[{"value":["OutpatientSurgeryVisit"]}]},{"value":["."]},{"r":"264","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"266","s":[{"value":["VisitStartWithED"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"270","s":[{"value":["end of "]},{"r":"269","s":[{"r":"268","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"269","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"273","locator":"109:3-128:31","type":"Query","source":[{"localId":"204","locator":"109:3-109:17","alias":"Visit","expression":{"localId":"203","locator":"109:3-109:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"220","locator":"110:8-114:4","identifier":"ObsVisit","expression":{"localId":"219","locator":"110:18-114:4","type":"Last","source":{"localId":"218","locator":"110:23-113:26","type":"Query","source":[{"localId":"206","locator":"110:23-110:78","alias":"LastObs","expression":{"localId":"205","locator":"110:23-110:70","dataType":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","type":"Retrieve","codes":{"locator":"110:48-110:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"213","locator":"111:6-111:96","type":"And","operand":[{"locator":"111:40-111:53","type":"In","operand":[{"locator":"111:35-111:38","type":"End","operand":{"localId":"208","locator":"111:12-111:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"111:40-111:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"111:68-111:96","type":"Subtract","operand":[{"localId":"211","locator":"111:68-111:96","type":"Start","operand":{"localId":"210","locator":"111:77-111:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"212","locator":"111:40-111:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"211","locator":"111:68-111:96","type":"Start","operand":{"localId":"210","locator":"111:77-111:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"111:40-111:53","type":"Not","operand":{"locator":"111:40-111:53","type":"IsNull","operand":{"localId":"211","locator":"111:68-111:96","type":"Start","operand":{"localId":"210","locator":"111:77-111:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"217","locator":"112:6-113:26","by":[{"localId":"216","locator":"113:6-113:26","direction":"asc","type":"ByExpression","expression":{"localId":"215","locator":"113:6-113:26","type":"End","operand":{"localId":"214","locator":"113:13-113:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"228","locator":"115:4-115:88","identifier":"VisitStart","expression":{"localId":"227","locator":"115:16-115:88","type":"Coalesce","operand":[{"localId":"223","locator":"115:25-115:56","type":"Start","operand":{"localId":"222","locator":"115:34-115:56","path":"relevantPeriod","type":"Property","source":{"localId":"221","locator":"115:34-115:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"226","locator":"115:59-115:87","type":"Start","operand":{"localId":"225","locator":"115:68-115:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"242","locator":"116:4-120:4","identifier":"EDVisit","expression":{"localId":"241","locator":"116:13-120:4","type":"Last","source":{"localId":"240","locator":"116:18-119:26","type":"Query","source":[{"localId":"230","locator":"116:18-116:78","alias":"LastED","expression":{"localId":"229","locator":"116:18-116:71","dataType":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","type":"Retrieve","codes":{"locator":"116:43-116:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"235","locator":"117:6-117:76","type":"And","operand":[{"locator":"117:39-117:52","type":"In","operand":[{"locator":"117:34-117:37","type":"End","operand":{"localId":"232","locator":"117:12-117:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"117:39-117:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"117:67-117:76","type":"Subtract","operand":[{"localId":"233","locator":"117:67-117:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"234","locator":"117:39-117:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"233","locator":"117:67-117:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"117:39-117:52","type":"Not","operand":{"locator":"117:39-117:52","type":"IsNull","operand":{"localId":"233","locator":"117:67-117:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"239","locator":"118:6-119:26","by":[{"localId":"238","locator":"119:6-119:26","direction":"asc","type":"ByExpression","expression":{"localId":"237","locator":"119:6-119:26","type":"End","operand":{"localId":"236","locator":"119:13-119:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"248","locator":"121:4-121:74","identifier":"VisitStartWithED","expression":{"localId":"247","locator":"121:22-121:74","type":"Coalesce","operand":[{"localId":"245","locator":"121:31-121:61","type":"Start","operand":{"localId":"244","locator":"121:40-121:61","path":"relevantPeriod","type":"Property","source":{"localId":"243","locator":"121:40-121:46","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"246","locator":"121:64-121:73","name":"VisitStart","type":"QueryLetRef"}]}},{"localId":"262","locator":"122:4-126:4","identifier":"OutpatientSurgeryVisit","expression":{"localId":"261","locator":"122:28-126:4","type":"Last","source":{"localId":"260","locator":"122:33-125:26","type":"Query","source":[{"localId":"250","locator":"122:33-122:100","alias":"LastSurgeryOP","expression":{"localId":"249","locator":"122:33-122:86","dataType":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","type":"Retrieve","codes":{"locator":"122:58-122:85","name":"Outpatient Surgery Service","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"255","locator":"123:6-123:89","type":"And","operand":[{"locator":"123:46-123:59","type":"In","operand":[{"locator":"123:41-123:44","type":"End","operand":{"localId":"252","locator":"123:12-123:39","path":"relevantPeriod","scope":"LastSurgeryOP","type":"Property"}},{"locator":"123:46-123:59","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"123:74-123:89","type":"Subtract","operand":[{"localId":"253","locator":"123:74-123:89","name":"VisitStartWithED","type":"QueryLetRef"},{"localId":"254","locator":"123:46-123:51","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"253","locator":"123:74-123:89","name":"VisitStartWithED","type":"QueryLetRef"}}]},{"locator":"123:46-123:59","type":"Not","operand":{"locator":"123:46-123:59","type":"IsNull","operand":{"localId":"253","locator":"123:74-123:89","name":"VisitStartWithED","type":"QueryLetRef"}}}]},"sort":{"localId":"259","locator":"124:6-125:26","by":[{"localId":"258","locator":"125:6-125:26","direction":"asc","type":"ByExpression","expression":{"localId":"257","locator":"125:6-125:26","type":"End","operand":{"localId":"256","locator":"125:13-125:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"272","locator":"127:4-128:31","expression":{"localId":"271","locator":"127:11-128:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"267","locator":"127:20-127:93","type":"Coalesce","operand":[{"localId":"265","locator":"127:29-127:74","type":"Start","operand":{"localId":"264","locator":"127:38-127:74","path":"relevantPeriod","type":"Property","source":{"localId":"263","locator":"127:38-127:59","name":"OutpatientSurgeryVisit","type":"QueryLetRef"}}},{"localId":"266","locator":"127:77-127:92","name":"VisitStartWithED","type":"QueryLetRef"}]},"high":{"localId":"270","locator":"128:4-128:30","type":"End","operand":{"localId":"269","locator":"128:11-128:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"202","locator":"108:87-108:108","name":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"327","locator":"131:1-145:31","name":"HospitalizationWithObservation","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"327","s":[{"value":["define function ","\"HospitalizationWithObservation\"","(","Encounter"," "]},{"r":"275","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"326","s":[{"r":"326","s":[{"s":[{"r":"277","s":[{"r":"276","s":[{"s":[{"value":["Encounter"]}]}]},{"value":[" ","Visit"]}]}]},{"value":["\n  \t"]},{"s":[{"value":["let "]},{"r":"293","s":[{"value":["ObsVisit",": "]},{"r":"292","s":[{"value":["Last","("]},{"r":"291","s":[{"s":[{"r":"279","s":[{"r":"278","s":[{"r":"278","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Observation Services\""]}]},{"value":["]"]}]}]},{"value":[" ","LastObs"]}]}]},{"value":["\n  \t\t\t"]},{"r":"286","s":[{"value":["where "]},{"r":"286","s":[{"r":"281","s":[{"r":"280","s":[{"value":["LastObs"]}]},{"value":["."]},{"r":"281","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"286","s":[{"value":["ends "]},{"r":"285","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"284","s":[{"value":["start of "]},{"r":"283","s":[{"r":"282","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"283","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"290","s":[{"value":["sort by \n  \t\t\t"]},{"r":"289","s":[{"r":"288","s":[{"value":["end of "]},{"r":"287","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]},{"value":[",\n  \t"]},{"r":"301","s":[{"value":["VisitStart",": "]},{"r":"300","s":[{"value":["Coalesce","("]},{"r":"296","s":[{"value":["start of "]},{"r":"295","s":[{"r":"294","s":[{"value":["ObsVisit"]}]},{"value":["."]},{"r":"295","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"299","s":[{"value":["start of "]},{"r":"298","s":[{"r":"297","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"298","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[")"]}]}]},{"value":[",\n  \t"]},{"r":"315","s":[{"value":["EDVisit",": "]},{"r":"314","s":[{"value":["Last","("]},{"r":"313","s":[{"s":[{"r":"303","s":[{"r":"302","s":[{"r":"302","s":[{"value":["[","\"Encounter, Performed\"",": "]},{"s":[{"value":["\"Emergency Department Visit\""]}]},{"value":["]"]}]}]},{"value":[" ","LastED"]}]}]},{"value":["\n  \t\t\t"]},{"r":"308","s":[{"value":["where "]},{"r":"308","s":[{"r":"305","s":[{"r":"304","s":[{"value":["LastED"]}]},{"value":["."]},{"r":"305","s":[{"value":["relevantPeriod"]}]}]},{"value":[" "]},{"r":"308","s":[{"value":["ends "]},{"r":"307","s":[{"value":["1 ","hour"]}]},{"value":[" or less on or before"]}]},{"value":[" "]},{"r":"306","s":[{"value":["VisitStart"]}]}]}]},{"value":["\n  \t\t\t"]},{"r":"312","s":[{"value":["sort by \n  \t\t\t"]},{"r":"311","s":[{"r":"310","s":[{"value":["end of "]},{"r":"309","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n  \t)"]}]}]}]},{"value":["\n  \t"]},{"r":"325","s":[{"value":["return "]},{"r":"324","s":[{"value":["Interval["]},{"r":"320","s":[{"value":["Coalesce","("]},{"r":"318","s":[{"value":["start of "]},{"r":"317","s":[{"r":"316","s":[{"value":["EDVisit"]}]},{"value":["."]},{"r":"317","s":[{"value":["relevantPeriod"]}]}]}]},{"value":[", "]},{"r":"319","s":[{"value":["VisitStart"]}]},{"value":[")"]}]},{"value":[", \n  \t"]},{"r":"323","s":[{"value":["end of "]},{"r":"322","s":[{"r":"321","s":[{"value":["Visit"]}]},{"value":["."]},{"r":"322","s":[{"value":["relevantPeriod"]}]}]}]},{"value":["]"]}]}]}]}]}]}}],"expression":{"localId":"326","locator":"132:3-145:31","type":"Query","source":[{"localId":"277","locator":"132:3-132:17","alias":"Visit","expression":{"localId":"276","locator":"132:3-132:11","name":"Encounter","type":"OperandRef"}}],"let":[{"localId":"293","locator":"133:8-137:4","identifier":"ObsVisit","expression":{"localId":"292","locator":"133:18-137:4","type":"Last","source":{"localId":"291","locator":"133:23-136:26","type":"Query","source":[{"localId":"279","locator":"133:23-133:78","alias":"LastObs","expression":{"localId":"278","locator":"133:23-133:70","dataType":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","type":"Retrieve","codes":{"locator":"133:48-133:69","name":"Observation Services","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"286","locator":"134:6-134:96","type":"And","operand":[{"locator":"134:40-134:53","type":"In","operand":[{"locator":"134:35-134:38","type":"End","operand":{"localId":"281","locator":"134:12-134:33","path":"relevantPeriod","scope":"LastObs","type":"Property"}},{"locator":"134:40-134:53","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"134:68-134:96","type":"Subtract","operand":[{"localId":"284","locator":"134:68-134:96","type":"Start","operand":{"localId":"283","locator":"134:77-134:96","path":"relevantPeriod","scope":"Visit","type":"Property"}},{"localId":"285","locator":"134:40-134:45","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"284","locator":"134:68-134:96","type":"Start","operand":{"localId":"283","locator":"134:77-134:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}]},{"locator":"134:40-134:53","type":"Not","operand":{"locator":"134:40-134:53","type":"IsNull","operand":{"localId":"284","locator":"134:68-134:96","type":"Start","operand":{"localId":"283","locator":"134:77-134:96","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}]},"sort":{"localId":"290","locator":"135:6-136:26","by":[{"localId":"289","locator":"136:6-136:26","direction":"asc","type":"ByExpression","expression":{"localId":"288","locator":"136:6-136:26","type":"End","operand":{"localId":"287","locator":"136:13-136:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}},{"localId":"301","locator":"138:4-138:88","identifier":"VisitStart","expression":{"localId":"300","locator":"138:16-138:88","type":"Coalesce","operand":[{"localId":"296","locator":"138:25-138:56","type":"Start","operand":{"localId":"295","locator":"138:34-138:56","path":"relevantPeriod","type":"Property","source":{"localId":"294","locator":"138:34-138:41","name":"ObsVisit","type":"QueryLetRef"}}},{"localId":"299","locator":"138:59-138:87","type":"Start","operand":{"localId":"298","locator":"138:68-138:87","path":"relevantPeriod","scope":"Visit","type":"Property"}}]}},{"localId":"315","locator":"139:4-143:4","identifier":"EDVisit","expression":{"localId":"314","locator":"139:13-143:4","type":"Last","source":{"localId":"313","locator":"139:18-142:26","type":"Query","source":[{"localId":"303","locator":"139:18-139:78","alias":"LastED","expression":{"localId":"302","locator":"139:18-139:71","dataType":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","templateId":"PositiveEncounterPerformed","codeProperty":"code","type":"Retrieve","codes":{"locator":"139:43-139:70","name":"Emergency Department Visit","type":"ValueSetRef"}}}],"relationship":[],"where":{"localId":"308","locator":"140:6-140:76","type":"And","operand":[{"locator":"140:39-140:52","type":"In","operand":[{"locator":"140:34-140:37","type":"End","operand":{"localId":"305","locator":"140:12-140:32","path":"relevantPeriod","scope":"LastED","type":"Property"}},{"locator":"140:39-140:52","lowClosed":true,"highClosed":true,"type":"Interval","low":{"locator":"140:67-140:76","type":"Subtract","operand":[{"localId":"306","locator":"140:67-140:76","name":"VisitStart","type":"QueryLetRef"},{"localId":"307","locator":"140:39-140:44","value":1,"unit":"hour","type":"Quantity"}]},"high":{"localId":"306","locator":"140:67-140:76","name":"VisitStart","type":"QueryLetRef"}}]},{"locator":"140:39-140:52","type":"Not","operand":{"locator":"140:39-140:52","type":"IsNull","operand":{"localId":"306","locator":"140:67-140:76","name":"VisitStart","type":"QueryLetRef"}}}]},"sort":{"localId":"312","locator":"141:6-142:26","by":[{"localId":"311","locator":"142:6-142:26","direction":"asc","type":"ByExpression","expression":{"localId":"310","locator":"142:6-142:26","type":"End","operand":{"localId":"309","locator":"142:13-142:26","name":"relevantPeriod","type":"IdentifierRef"}}}]}}}}],"relationship":[],"return":{"localId":"325","locator":"144:4-145:31","expression":{"localId":"324","locator":"144:11-145:31","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"320","locator":"144:20-144:72","type":"Coalesce","operand":[{"localId":"318","locator":"144:29-144:59","type":"Start","operand":{"localId":"317","locator":"144:38-144:59","path":"relevantPeriod","type":"Property","source":{"localId":"316","locator":"144:38-144:44","name":"EDVisit","type":"QueryLetRef"}}},{"localId":"319","locator":"144:62-144:71","name":"VisitStart","type":"QueryLetRef"}]},"high":{"localId":"323","locator":"145:4-145:30","type":"End","operand":{"localId":"322","locator":"145:11-145:30","path":"relevantPeriod","scope":"Visit","type":"Property"}}}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"275","locator":"131:60-131:81","name":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"342","locator":"148:1-149:100","name":"ToDate","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"342","s":[{"value":["define function ","\"ToDate\"","(","Value"," "]},{"r":"328","s":[{"value":["DateTime"]}]},{"value":[" ):\n  "]},{"r":"341","s":[{"r":"341","s":[{"value":["DateTime","("]},{"r":"330","s":[{"value":["year from "]},{"r":"329","s":[{"value":["Value"]}]}]},{"value":[", "]},{"r":"332","s":[{"value":["month from "]},{"r":"331","s":[{"value":["Value"]}]}]},{"value":[", "]},{"r":"334","s":[{"value":["day from "]},{"r":"333","s":[{"value":["Value"]}]}]},{"r":"335","value":[", ","0",", ","0",", ","0",", ","0",", "]},{"r":"340","s":[{"value":["timezoneoffset from "]},{"r":"339","s":[{"value":["Value"]}]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"341","locator":"149:3-149:100","type":"DateTime","year":{"localId":"330","locator":"149:12-149:26","precision":"Year","type":"DateTimeComponentFrom","operand":{"localId":"329","locator":"149:22-149:26","name":"Value","type":"OperandRef"}},"month":{"localId":"332","locator":"149:29-149:44","precision":"Month","type":"DateTimeComponentFrom","operand":{"localId":"331","locator":"149:40-149:44","name":"Value","type":"OperandRef"}},"day":{"localId":"334","locator":"149:47-149:60","precision":"Day","type":"DateTimeComponentFrom","operand":{"localId":"333","locator":"149:56-149:60","name":"Value","type":"OperandRef"}},"hour":{"localId":"335","locator":"149:63","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"minute":{"localId":"336","locator":"149:66","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"second":{"localId":"337","locator":"149:69","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"millisecond":{"localId":"338","locator":"149:72","valueType":"{urn:hl7-org:elm-types:r1}Integer","value":"0","type":"Literal"},"timezoneOffset":{"localId":"340","locator":"149:75-149:99","type":"TimezoneOffsetFrom","operand":{"localId":"339","locator":"149:95-149:99","name":"Value","type":"OperandRef"}}},"operand":[{"name":"Value","operandTypeSpecifier":{"localId":"328","locator":"148:32-148:39","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}]},{"localId":"347","locator":"152:1-153:61","name":"HospitalizationWithObservationLengthofStay","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"347","s":[{"value":["define function ","\"HospitalizationWithObservationLengthofStay\"","(","Encounter"," "]},{"r":"343","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"346","s":[{"r":"346","s":[{"value":["\"LengthInDays\"","("]},{"r":"345","s":[{"value":["\"HospitalizationWithObservation\"","("]},{"r":"344","s":[{"value":["Encounter"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"346","locator":"153:3-153:61","name":"LengthInDays","type":"FunctionRef","operand":[{"localId":"345","locator":"153:18-153:60","name":"HospitalizationWithObservation","type":"FunctionRef","operand":[{"localId":"344","locator":"153:51-153:59","name":"Encounter","type":"OperandRef"}]}]},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"343","locator":"152:72-152:93","name":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"368","locator":"156:1-161:3","name":"FirstInpatientIntensiveCareUnit","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"368","s":[{"value":["define function ","\"FirstInpatientIntensiveCareUnit\"","(","Encounter"," "]},{"r":"348","s":[{"value":["\"Encounter, Performed\""]}]},{"value":[" ):\n  "]},{"r":"367","s":[{"r":"367","s":[{"value":["First","("]},{"r":"366","s":[{"s":[{"r":"351","s":[{"r":"350","s":[{"value":["("]},{"r":"350","s":[{"r":"349","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"350","s":[{"value":["facilityLocations"]}]}]},{"value":[")"]}]},{"value":["HospitalLocation"]}]}]},{"value":["\n      "]},{"r":"361","s":[{"value":["where "]},{"r":"361","s":[{"r":"355","s":[{"r":"353","s":[{"r":"352","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"353","s":[{"value":["code"]}]}]},{"value":[" in "]},{"r":"354","s":[{"value":["\"Intensive Care Unit\""]}]}]},{"value":["\n        and "]},{"r":"360","s":[{"r":"357","s":[{"r":"356","s":[{"value":["HospitalLocation"]}]},{"value":["."]},{"r":"357","s":[{"value":["locationPeriod"]}]}]},{"r":"360","value":[" ","during"," "]},{"r":"359","s":[{"r":"358","s":[{"value":["Encounter"]}]},{"value":["."]},{"r":"359","s":[{"value":["relevantPeriod"]}]}]}]}]}]},{"value":["\n      "]},{"r":"365","s":[{"value":["sort by "]},{"r":"364","s":[{"r":"363","s":[{"value":["start of "]},{"r":"362","s":[{"value":["locationPeriod"]}]}]}]}]}]},{"value":["\n  )"]}]}]}]}}],"expression":{"localId":"367","locator":"157:3-161:3","type":"First","source":{"localId":"366","locator":"157:9-160:37","type":"Query","source":[{"localId":"351","locator":"157:9-157:53","alias":"HospitalLocation","expression":{"localId":"350","locator":"157:9-157:37","path":"facilityLocations","type":"Property","source":{"localId":"349","locator":"157:10-157:18","name":"Encounter","type":"OperandRef"}}}],"relationship":[],"where":{"localId":"361","locator":"158:7-159:75","type":"And","operand":[{"localId":"355","locator":"158:13-158:58","type":"InValueSet","code":{"localId":"353","locator":"158:13-158:33","path":"code","scope":"HospitalLocation","type":"Property"},"valueset":{"localId":"354","locator":"158:38-158:58","name":"Intensive Care Unit"}},{"localId":"360","locator":"159:13-159:75","type":"IncludedIn","operand":[{"localId":"357","locator":"159:13-159:43","path":"locationPeriod","scope":"HospitalLocation","type":"Property"},{"localId":"359","locator":"159:52-159:75","path":"relevantPeriod","type":"Property","source":{"localId":"358","locator":"159:52-159:60","name":"Encounter","type":"OperandRef"}}]}]},"sort":{"localId":"365","locator":"160:7-160:37","by":[{"localId":"364","locator":"160:15-160:37","direction":"asc","type":"ByExpression","expression":{"localId":"363","locator":"160:15-160:37","type":"Start","operand":{"localId":"362","locator":"160:24-160:37","name":"locationPeriod","type":"IdentifierRef"}}}]}}},"operand":[{"name":"Encounter","operandTypeSpecifier":{"localId":"348","locator":"156:61-156:82","name":"{urn:healthit-gov:qdm:v5_5}PositiveEncounterPerformed","type":"NamedTypeSpecifier"}}]},{"localId":"386","locator":"164:1-167:35","name":"NormalizeInterval","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"386","s":[{"value":["define function ","\"NormalizeInterval\"","(","pointInTime"," "]},{"r":"369","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"371","s":[{"value":["Interval\u003c"]},{"r":"370","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"385","s":[{"r":"385","s":[{"value":["if "]},{"r":"373","s":[{"r":"372","s":[{"value":["pointInTime"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"376","s":[{"value":["Interval["]},{"r":"374","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"375","s":[{"value":["pointInTime"]}]},{"value":["]"]}]},{"value":["\n    else "]},{"r":"384","s":[{"value":["if "]},{"r":"378","s":[{"r":"377","s":[{"value":["period"]}]},{"value":[" is not null"]}]},{"value":[" then "]},{"r":"379","s":[{"value":["period"]}]},{"value":[" \n    else "]},{"r":"383","s":[{"r":"380","value":["null"," as "]},{"r":"382","s":[{"value":["Interval\u003c"]},{"r":"381","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]}]}]}]}]}]}}],"expression":{"localId":"385","locator":"165:3-167:35","type":"If","condition":{"asType":"{urn:hl7-org:elm-types:r1}Boolean","type":"As","operand":{"localId":"373","locator":"165:6-165:28","type":"Not","operand":{"locator":"165:6-165:28","type":"IsNull","operand":{"localId":"372","locator":"165:6-165:16","name":"pointInTime","type":"OperandRef"}}}},"then":{"localId":"376","locator":"165:35-165:68","lowClosed":true,"highClosed":true,"type":"Interval","low":{"localId":"374","locator":"165:44-165:54","name":"pointInTime","type":"OperandRef"},"high":{"localId":"375","locator":"165:57-165:67","name":"pointInTime","type":"OperandRef"}},"else":{"localId":"384","locator":"166:10-167:35","type":"If","condition":{"asType":"{urn:hl7-org:elm-types:r1}Boolean","type":"As","operand":{"localId":"378","locator":"166:13-166:30","type":"Not","operand":{"locator":"166:13-166:30","type":"IsNull","operand":{"localId":"377","locator":"166:13-166:18","name":"period","type":"OperandRef"}}}},"then":{"localId":"379","locator":"166:37-166:42","name":"period","type":"OperandRef"},"else":{"localId":"383","locator":"167:10-167:35","strict":false,"type":"As","operand":{"localId":"380","locator":"167:10-167:13","type":"Null"},"asTypeSpecifier":{"localId":"382","locator":"167:18-167:35","type":"IntervalTypeSpecifier","pointType":{"localId":"381","locator":"167:27-167:34","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}}},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"369","locator":"164:49-164:56","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"371","locator":"164:66-164:83","type":"IntervalTypeSpecifier","pointType":{"localId":"370","locator":"164:75-164:82","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"399","locator":"170:1-173:3","name":"HasStart","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"399","s":[{"value":["define function ","\"HasStart\"","(","period"," "]},{"r":"388","s":[{"value":["Interval\u003c"]},{"r":"387","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"398","s":[{"r":"398","s":[{"value":["not "]},{"r":"397","s":[{"value":["( "]},{"r":"397","s":[{"r":"391","s":[{"r":"390","s":[{"value":["start of "]},{"r":"389","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or "]},{"r":"396","s":[{"r":"393","s":[{"value":["start of "]},{"r":"392","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"395","s":[{"value":["minimum"," "]},{"r":"394","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"398","locator":"171:3-173:3","type":"Not","operand":{"localId":"397","locator":"171:7-173:3","type":"Or","operand":[{"localId":"391","locator":"171:9-171:31","type":"IsNull","operand":{"localId":"390","locator":"171:9-171:23","type":"Start","operand":{"localId":"389","locator":"171:18-171:23","name":"period","type":"OperandRef"}}},{"localId":"396","locator":"172:10-172:43","type":"Equal","operand":[{"localId":"393","locator":"172:10-172:24","type":"Start","operand":{"localId":"392","locator":"172:19-172:24","name":"period","type":"OperandRef"}},{"localId":"395","locator":"172:28-172:43","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MinValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"388","locator":"170:35-170:52","type":"IntervalTypeSpecifier","pointType":{"localId":"387","locator":"170:44-170:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"412","locator":"176:1-181:3","name":"HasEnd","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"412","s":[{"value":["define function ","\"HasEnd\"","(","period"," "]},{"r":"401","s":[{"value":["Interval\u003c"]},{"r":"400","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"411","s":[{"r":"411","s":[{"value":["not "]},{"r":"410","s":[{"value":["( \n    "]},{"r":"410","s":[{"r":"404","s":[{"r":"403","s":[{"value":["end of "]},{"r":"402","s":[{"value":["period"]}]}]},{"value":[" is null"]}]},{"value":["\n      or \n      "]},{"r":"409","s":[{"r":"406","s":[{"value":["end of "]},{"r":"405","s":[{"value":["period"]}]}]},{"value":[" ","="," "]},{"r":"408","s":[{"value":["maximum"," "]},{"r":"407","s":[{"value":["DateTime"]}]}]}]}]},{"value":["\n  )"]}]}]}]}]}}],"expression":{"localId":"411","locator":"177:3-181:3","type":"Not","operand":{"localId":"410","locator":"177:7-181:3","type":"Or","operand":[{"localId":"404","locator":"178:5-178:25","type":"IsNull","operand":{"localId":"403","locator":"178:5-178:17","type":"End","operand":{"localId":"402","locator":"178:12-178:17","name":"period","type":"OperandRef"}}},{"localId":"409","locator":"180:7-180:38","type":"Equal","operand":[{"localId":"406","locator":"180:7-180:19","type":"End","operand":{"localId":"405","locator":"180:14-180:19","name":"period","type":"OperandRef"}},{"localId":"408","locator":"180:23-180:38","valueType":"{urn:hl7-org:elm-types:r1}DateTime","type":"MaxValue"}]}]}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"401","locator":"176:33-176:50","type":"IntervalTypeSpecifier","pointType":{"localId":"400","locator":"176:42-176:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"422","locator":"184:1-187:24","name":"Latest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"422","s":[{"value":["define function ","\"Latest\"","(","period"," "]},{"r":"414","s":[{"value":["Interval\u003c"]},{"r":"413","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"421","s":[{"r":"421","s":[{"value":["if "]},{"r":"416","s":[{"value":["( "]},{"r":"416","s":[{"value":["HasEnd","("]},{"r":"415","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then \n  "]},{"r":"418","s":[{"value":["end of "]},{"r":"417","s":[{"value":["period"]}]}]},{"value":[" \n    else "]},{"r":"420","s":[{"value":["start of "]},{"r":"419","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"421","locator":"185:3-187:24","type":"If","condition":{"asType":"{urn:hl7-org:elm-types:r1}Boolean","type":"As","operand":{"localId":"416","locator":"185:6-185:22","name":"HasEnd","type":"FunctionRef","operand":[{"localId":"415","locator":"185:15-185:20","name":"period","type":"OperandRef"}]}},"then":{"localId":"418","locator":"186:3-186:15","type":"End","operand":{"localId":"417","locator":"186:10-186:15","name":"period","type":"OperandRef"}},"else":{"localId":"420","locator":"187:10-187:24","type":"Start","operand":{"localId":"419","locator":"187:19-187:24","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"414","locator":"184:33-184:50","type":"IntervalTypeSpecifier","pointType":{"localId":"413","locator":"184:42-184:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"432","locator":"190:1-193:15","name":"Earliest","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"432","s":[{"value":["define function ","\"Earliest\"","(","period"," "]},{"r":"424","s":[{"value":["Interval\u003c"]},{"r":"423","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"431","s":[{"r":"431","s":[{"value":["if "]},{"r":"426","s":[{"value":["( "]},{"r":"426","s":[{"value":["HasStart","("]},{"r":"425","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]},{"value":[" then "]},{"r":"428","s":[{"value":["start of "]},{"r":"427","s":[{"value":["period"]}]}]},{"value":[" \n    else \n  "]},{"r":"430","s":[{"value":["end of "]},{"r":"429","s":[{"value":["period"]}]}]}]}]}]}}],"expression":{"localId":"431","locator":"191:3-193:15","type":"If","condition":{"asType":"{urn:hl7-org:elm-types:r1}Boolean","type":"As","operand":{"localId":"426","locator":"191:6-191:24","name":"HasStart","type":"FunctionRef","operand":[{"localId":"425","locator":"191:17-191:22","name":"period","type":"OperandRef"}]}},"then":{"localId":"428","locator":"191:31-191:45","type":"Start","operand":{"localId":"427","locator":"191:40-191:45","name":"period","type":"OperandRef"}},"else":{"localId":"430","locator":"193:3-193:15","type":"End","operand":{"localId":"429","locator":"193:10-193:15","name":"period","type":"OperandRef"}}},"operand":[{"name":"period","operandTypeSpecifier":{"localId":"424","locator":"190:35-190:52","type":"IntervalTypeSpecifier","pointType":{"localId":"423","locator":"190:44-190:51","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"440","locator":"196:1-197:48","name":"LatestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"440","s":[{"value":["define function ","\"LatestOf\"","(","pointInTime"," "]},{"r":"433","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"435","s":[{"value":["Interval\u003c"]},{"r":"434","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"439","s":[{"r":"439","s":[{"value":["Latest","("]},{"r":"438","s":[{"value":["NormalizeInterval","("]},{"r":"436","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"437","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"439","locator":"197:3-197:48","name":"Latest","type":"FunctionRef","operand":[{"localId":"438","locator":"197:10-197:47","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"436","locator":"197:28-197:38","name":"pointInTime","type":"OperandRef"},{"localId":"437","locator":"197:41-197:46","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"433","locator":"196:40-196:47","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"435","locator":"196:57-196:74","type":"IntervalTypeSpecifier","pointType":{"localId":"434","locator":"196:66-196:73","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]},{"localId":"448","locator":"200:1-201:50","name":"EarliestOf","context":"Patient","accessLevel":"Public","type":"FunctionDef","annotation":[{"type":"Annotation","s":{"r":"448","s":[{"value":["define function ","\"EarliestOf\"","(","pointInTime"," "]},{"r":"441","s":[{"value":["DateTime"]}]},{"value":[", ","period"," "]},{"r":"443","s":[{"value":["Interval\u003c"]},{"r":"442","s":[{"value":["DateTime"]}]},{"value":["\u003e"]}]},{"value":[" ):\n  "]},{"r":"447","s":[{"r":"447","s":[{"value":["Earliest","("]},{"r":"446","s":[{"value":["NormalizeInterval","("]},{"r":"444","s":[{"value":["pointInTime"]}]},{"value":[", "]},{"r":"445","s":[{"value":["period"]}]},{"value":[")"]}]},{"value":[")"]}]}]}]}}],"expression":{"localId":"447","locator":"201:3-201:50","name":"Earliest","type":"FunctionRef","operand":[{"localId":"446","locator":"201:12-201:49","name":"NormalizeInterval","type":"FunctionRef","operand":[{"localId":"444","locator":"201:30-201:40","name":"pointInTime","type":"OperandRef"},{"localId":"445","locator":"201:43-201:48","name":"period","type":"OperandRef"}]}]},"operand":[{"name":"pointInTime","operandTypeSpecifier":{"localId":"441","locator":"200:42-200:49","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}},{"name":"period","operandTypeSpecifier":{"localId":"443","locator":"200:59-200:76","type":"IntervalTypeSpecifier","pointType":{"localId":"442","locator":"200:68-200:75","name":"{urn:hl7-org:elm-types:r1}DateTime","type":"NamedTypeSpecifier"}}}]}]}}},"elm_annotations":{"statements":[{"children":[{"children":[{"children":[{"text":"define \"ED Encounter\":\n  "}]},{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"10"}],"ref_id":"11"}],"define_name":"ED Encounter"},{"children":[{"children":[{"children":[{"text":"define function \"LengthInDays\"(Value "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"16"},{"children":[{"text":"\u003e"}]}],"ref_id":"17"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"difference in days between "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"18"}],"node_type":"Start","ref_id":"19"},{"children":[{"text":" and "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"20"}],"node_type":"End","ref_id":"21"}],"node_type":"DifferenceBetween","ref_id":"22"}],"node_type":"DifferenceBetween","ref_id":"22"}],"ref_id":"23"}],"define_name":"LengthInDays"},{"children":[{"children":[{"children":[{"text":"define \"Inpatient Encounter\":\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Encounter Inpatient\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"12"}],"node_type":"Retrieve","ref_id":"12"},{"children":[{"text":" EncounterInpatient"}]}],"ref_id":"13"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"14"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"15"}],"node_type":"Property","ref_id":"15"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"24"},{"children":[{"text":"\u003c= 120"}],"node_type":"Literal","ref_id":"25"}],"node_type":"LessOrEqual","ref_id":"26"},{"children":[{"text":"\n      and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"EncounterInpatient"}]}],"ref_id":"27"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"28"}],"node_type":"Property","ref_id":"28"},{"children":[{"text":" ends during day of "}],"node_type":"In","ref_id":"30"},{"children":[{"children":[{"text":"\"Measurement Period\""}]}],"node_type":"ParameterRef","ref_id":"29"}],"node_type":"In","ref_id":"30"}],"ref_id":"31"}],"ref_id":"31"}],"node_type":"Query","ref_id":"32"}],"ref_id":"33"}],"define_name":"Inpatient Encounter"},{"children":[{"children":[{"children":[{"text":"define function \"CalendarAgeInDaysAt\"(BirthDateTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"34"},{"children":[{"text":", AsOf "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"35"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"days between "}]},{"children":[{"children":[{"text":"ToDate("}]},{"children":[{"children":[{"text":"BirthDateTime"}]}],"node_type":"OperandRef","ref_id":"36"},{"children":[{"text":")"}]}],"node_type":"ToDate","ref_id":"37"},{"children":[{"text":"and "}]},{"children":[{"children":[{"text":"ToDate("}]},{"children":[{"children":[{"text":"AsOf"}]}],"node_type":"OperandRef","ref_id":"38"},{"children":[{"text":")"}]}],"node_type":"ToDate","ref_id":"39"}],"node_type":"DurationBetween","ref_id":"40"}],"node_type":"DurationBetween","ref_id":"40"}],"ref_id":"41"}],"define_name":"CalendarAgeInDaysAt"},{"children":[{"children":[{"children":[{"text":"define function \"CalendarAgeInDays\"(BirthDateTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"42"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"CalendarAgeInDaysAt("}]},{"children":[{"children":[{"text":"BirthDateTime"}]}],"node_type":"OperandRef","ref_id":"43"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"Today()"}]}],"node_type":"Today","ref_id":"44"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"45"}],"node_type":"FunctionRef","ref_id":"45"}],"ref_id":"46"}],"define_name":"CalendarAgeInDays"},{"children":[{"children":[{"children":[{"text":"define function \"CalendarAgeInMonthsAt\"(BirthDateTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"47"},{"children":[{"text":", AsOf "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"48"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"months between "}]},{"children":[{"children":[{"text":"ToDate("}]},{"children":[{"children":[{"text":"BirthDateTime"}]}],"node_type":"OperandRef","ref_id":"49"},{"children":[{"text":")"}]}],"node_type":"ToDate","ref_id":"50"},{"children":[{"text":"and "}]},{"children":[{"children":[{"text":"ToDate("}]},{"children":[{"children":[{"text":"AsOf"}]}],"node_type":"OperandRef","ref_id":"51"},{"children":[{"text":")"}]}],"node_type":"ToDate","ref_id":"52"}],"node_type":"DurationBetween","ref_id":"53"}],"node_type":"DurationBetween","ref_id":"53"}],"ref_id":"54"}],"define_name":"CalendarAgeInMonthsAt"},{"children":[{"children":[{"children":[{"text":"define function \"CalendarAgeInMonths\"(BirthDateTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"55"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"CalendarAgeInMonthsAt("}]},{"children":[{"children":[{"text":"BirthDateTime"}]}],"node_type":"OperandRef","ref_id":"56"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"Today()"}]}],"node_type":"Today","ref_id":"57"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"58"}],"node_type":"FunctionRef","ref_id":"58"}],"ref_id":"59"}],"define_name":"CalendarAgeInMonths"},{"children":[{"children":[{"children":[{"text":"define function \"CalendarAgeInYearsAt\"(BirthDateTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"60"},{"children":[{"text":", AsOf "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"61"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"years between "}]},{"children":[{"children":[{"text":"ToDate("}]},{"children":[{"children":[{"text":"BirthDateTime"}]}],"node_type":"OperandRef","ref_id":"62"},{"children":[{"text":")"}]}],"node_type":"ToDate","ref_id":"63"},{"children":[{"text":"and "}]},{"children":[{"children":[{"text":"ToDate("}]},{"children":[{"children":[{"text":"AsOf"}]}],"node_type":"OperandRef","ref_id":"64"},{"children":[{"text":")"}]}],"node_type":"ToDate","ref_id":"65"}],"node_type":"DurationBetween","ref_id":"66"}],"node_type":"DurationBetween","ref_id":"66"}],"ref_id":"67"}],"define_name":"CalendarAgeInYearsAt"},{"children":[{"children":[{"children":[{"text":"define function \"CalendarAgeInYears\"(BirthDateTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"68"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"CalendarAgeInYearsAt("}]},{"children":[{"children":[{"text":"BirthDateTime"}]}],"node_type":"OperandRef","ref_id":"69"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"Today()"}]}],"node_type":"Today","ref_id":"70"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"71"}],"node_type":"FunctionRef","ref_id":"71"}],"ref_id":"72"}],"define_name":"CalendarAgeInYears"},{"children":[{"children":[{"children":[{"text":"define function \"HospitalizationLocations\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"76"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"77"},{"children":[{"text":" Visit"}]}],"ref_id":"78"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"79"}],"node_type":"Retrieve","ref_id":"79"},{"children":[{"text":" LastED"}]}],"ref_id":"80"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"81"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"82"}],"node_type":"Property","ref_id":"82"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"86"},{"children":[{"text":" or less on or before"}]}],"ref_id":"87"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"83"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"84"}],"node_type":"Property","ref_id":"84"}],"node_type":"Start","ref_id":"85"}],"ref_id":"87"}],"ref_id":"87"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"88"}],"node_type":"End","ref_id":"89"}],"ref_id":"90"}],"ref_id":"91"}],"ref_id":"92"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"93"}],"ref_id":"94"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"node_type":"QueryLetRef","ref_id":"95"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"96"},{"children":[{"text":" then "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"97"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"98"}],"ref_id":"98"},{"children":[{"text":" \n      else "}]},{"children":[{"children":[{"text":"flatten "}]},{"children":[{"children":[{"text":"{ "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"99"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"100"}],"ref_id":"100"},{"children":[{"text":", "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"101"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"ref_id":"102"}],"ref_id":"102"},{"children":[{"text":" }"}]}],"node_type":"List","ref_id":"103"}],"ref_id":"104"}],"node_type":"If","ref_id":"105"}],"ref_id":"106"}],"node_type":"Query","ref_id":"107"}],"node_type":"Query","ref_id":"107"}],"ref_id":"108"}],"define_name":"HospitalizationLocations"},{"children":[{"children":[{"children":[{"text":"define function \"EmergencyDepartmentArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"109"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"110"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"111"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"111"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"112"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"113"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"114"}],"ref_id":"114"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}],"ref_id":"115"}],"ref_id":"116"}],"ref_id":"116"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"117"}],"node_type":"Start","ref_id":"118"}],"ref_id":"119"}],"ref_id":"120"}],"ref_id":"121"},{"children":[{"text":"\n  )"}]}],"ref_id":"122"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"123"}],"node_type":"Property","ref_id":"123"}],"node_type":"Start","ref_id":"124"}],"node_type":"Start","ref_id":"124"}],"ref_id":"125"}],"define_name":"EmergencyDepartmentArrivalTime"},{"children":[{"children":[{"children":[{"text":"define function \"Hospitalization\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"128"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"129"},{"children":[{"text":" Visit"}]}],"ref_id":"130"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"131"}],"node_type":"Retrieve","ref_id":"131"},{"children":[{"text":" LastED"}]}],"ref_id":"132"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"133"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"134"}],"node_type":"Property","ref_id":"134"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"138"},{"children":[{"text":" or less on or before"}]}],"ref_id":"139"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"135"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"136"}],"node_type":"Property","ref_id":"136"}],"node_type":"Start","ref_id":"137"}],"ref_id":"139"}],"ref_id":"139"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"140"}],"node_type":"End","ref_id":"141"}],"ref_id":"142"}],"ref_id":"143"}],"ref_id":"144"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"145"}],"ref_id":"146"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"147"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"148"}],"node_type":"Property","ref_id":"148"}],"node_type":"Start","ref_id":"149"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"150"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"151"}],"node_type":"Property","ref_id":"151"}],"node_type":"Start","ref_id":"152"},{"children":[{"text":")"}]}],"ref_id":"153"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"154"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"155"}],"node_type":"Property","ref_id":"155"}],"ref_id":"156"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"157"}],"ref_id":"158"}],"node_type":"Query","ref_id":"159"}],"node_type":"Query","ref_id":"159"}],"ref_id":"160"}],"define_name":"Hospitalization"},{"children":[{"children":[{"children":[{"text":"define function \"HospitalAdmissionTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"126"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"127"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"161"}],"node_type":"Start","ref_id":"162"}],"node_type":"Start","ref_id":"162"}],"ref_id":"163"}],"define_name":"HospitalAdmissionTime"},{"children":[{"children":[{"children":[{"text":"define function \"HospitalArrivalTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"164"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"165"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"166"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"166"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"167"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"168"}],"node_type":"Start","ref_id":"169"}],"ref_id":"170"}],"ref_id":"171"}],"ref_id":"172"},{"children":[{"text":"\n  )"}]}],"ref_id":"173"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"174"}],"node_type":"Property","ref_id":"174"}],"node_type":"Start","ref_id":"175"}],"node_type":"Start","ref_id":"175"}],"ref_id":"176"}],"define_name":"HospitalArrivalTime"},{"children":[{"children":[{"children":[{"text":"define function \"HospitalizationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"179"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"LengthInDays("}]},{"children":[{"children":[{"text":"\"Hospitalization\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"180"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"181"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"182"}],"node_type":"FunctionRef","ref_id":"182"}],"ref_id":"183"}],"define_name":"HospitalizationLengthofStay"},{"children":[{"children":[{"children":[{"text":"define function \"HospitalDepartureTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"184"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"text":"\"HospitalizationLocations\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"185"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"186"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"186"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"187"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"188"}],"node_type":"Start","ref_id":"189"}],"ref_id":"190"}],"ref_id":"191"}],"ref_id":"192"},{"children":[{"text":"\n  )"}]}],"ref_id":"193"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"194"}],"node_type":"Property","ref_id":"194"}],"node_type":"End","ref_id":"195"}],"node_type":"End","ref_id":"195"}],"ref_id":"196"}],"define_name":"HospitalDepartureTime"},{"children":[{"children":[{"children":[{"text":"define function \"HospitalDischargeTime\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"197"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"198"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"199"}],"node_type":"Property","ref_id":"199"}],"node_type":"End","ref_id":"200"}],"node_type":"End","ref_id":"200"}],"ref_id":"201"}],"define_name":"HospitalDischargeTime"},{"children":[{"children":[{"children":[{"text":"define function \"HospitalizationWithObservationAndOutpatientSurgeryService\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"202"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"203"},{"children":[{"text":" Visit"}]}],"ref_id":"204"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"205"}],"node_type":"Retrieve","ref_id":"205"},{"children":[{"text":" LastObs"}]}],"ref_id":"206"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"207"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"208"}],"node_type":"Property","ref_id":"208"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"212"},{"children":[{"text":" or less on or before"}]}],"ref_id":"213"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"209"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"210"}],"node_type":"Property","ref_id":"210"}],"node_type":"Start","ref_id":"211"}],"ref_id":"213"}],"ref_id":"213"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"214"}],"node_type":"End","ref_id":"215"}],"ref_id":"216"}],"ref_id":"217"}],"ref_id":"218"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"219"}],"ref_id":"220"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"221"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"222"}],"node_type":"Property","ref_id":"222"}],"node_type":"Start","ref_id":"223"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"224"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"225"}],"node_type":"Property","ref_id":"225"}],"node_type":"Start","ref_id":"226"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"227"}],"ref_id":"228"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"229"}],"node_type":"Retrieve","ref_id":"229"},{"children":[{"text":" LastED"}]}],"ref_id":"230"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"231"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"232"}],"node_type":"Property","ref_id":"232"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"234"},{"children":[{"text":" or less on or before"}]}],"ref_id":"235"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"233"}],"ref_id":"235"}],"ref_id":"235"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"236"}],"node_type":"End","ref_id":"237"}],"ref_id":"238"}],"ref_id":"239"}],"ref_id":"240"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"241"}],"ref_id":"242"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStartWithED: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"243"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"244"}],"node_type":"Property","ref_id":"244"}],"node_type":"Start","ref_id":"245"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"246"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"247"}],"ref_id":"248"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"OutpatientSurgeryVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Outpatient Surgery Service\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"249"}],"node_type":"Retrieve","ref_id":"249"},{"children":[{"text":" LastSurgeryOP"}]}],"ref_id":"250"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastSurgeryOP"}]}],"ref_id":"251"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"252"}],"node_type":"Property","ref_id":"252"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"254"},{"children":[{"text":" or less on or before"}]}],"ref_id":"255"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"253"}],"ref_id":"255"}],"ref_id":"255"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"256"}],"node_type":"End","ref_id":"257"}],"ref_id":"258"}],"ref_id":"259"}],"ref_id":"260"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"261"}],"ref_id":"262"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"OutpatientSurgeryVisit"}]}],"ref_id":"263"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"264"}],"node_type":"Property","ref_id":"264"}],"node_type":"Start","ref_id":"265"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStartWithED"}]}],"node_type":"QueryLetRef","ref_id":"266"},{"children":[{"text":")"}]}],"ref_id":"267"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"268"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"269"}],"node_type":"Property","ref_id":"269"}],"ref_id":"270"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"271"}],"ref_id":"272"}],"node_type":"Query","ref_id":"273"}],"node_type":"Query","ref_id":"273"}],"ref_id":"274"}],"define_name":"HospitalizationWithObservationAndOutpatientSurgeryService"},{"children":[{"children":[{"children":[{"text":"define function \"HospitalizationWithObservation\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"275"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"Encounter"}]}]}],"node_type":"OperandRef","ref_id":"276"},{"children":[{"text":" Visit"}]}],"ref_id":"277"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"let "}]},{"children":[{"children":[{"text":"ObsVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Observation Services\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"278"}],"node_type":"Retrieve","ref_id":"278"},{"children":[{"text":" LastObs"}]}],"ref_id":"279"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastObs"}]}],"ref_id":"280"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"281"}],"node_type":"Property","ref_id":"281"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"285"},{"children":[{"text":" or less on or before"}]}],"ref_id":"286"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"282"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"283"}],"node_type":"Property","ref_id":"283"}],"node_type":"Start","ref_id":"284"}],"ref_id":"286"}],"ref_id":"286"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"287"}],"node_type":"End","ref_id":"288"}],"ref_id":"289"}],"ref_id":"290"}],"ref_id":"291"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"292"}],"ref_id":"293"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"VisitStart: "}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"ObsVisit"}]}],"ref_id":"294"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"295"}],"node_type":"Property","ref_id":"295"}],"node_type":"Start","ref_id":"296"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"297"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"298"}],"node_type":"Property","ref_id":"298"}],"node_type":"Start","ref_id":"299"},{"children":[{"text":")"}]}],"node_type":"Coalesce","ref_id":"300"}],"ref_id":"301"},{"children":[{"text":",\n    "}]},{"children":[{"children":[{"text":"EDVisit: "}]},{"children":[{"children":[{"text":"Last("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"[\"Encounter, Performed\": "}]},{"children":[{"children":[{"text":"\"Emergency Department Visit\""}]}]},{"children":[{"text":"]"}]}],"node_type":"Retrieve","ref_id":"302"}],"node_type":"Retrieve","ref_id":"302"},{"children":[{"text":" LastED"}]}],"ref_id":"303"}]},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"text":"LastED"}]}],"ref_id":"304"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"305"}],"node_type":"Property","ref_id":"305"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"ends "}]},{"children":[{"children":[{"text":"1 hour"}]}],"node_type":"Quantity","ref_id":"307"},{"children":[{"text":" or less on or before"}]}],"ref_id":"308"},{"children":[{"text":" "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"306"}],"ref_id":"308"}],"ref_id":"308"},{"children":[{"text":"\n        "}]},{"children":[{"children":[{"text":"sort by \n        "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"IdentifierRef","ref_id":"309"}],"node_type":"End","ref_id":"310"}],"ref_id":"311"}],"ref_id":"312"}],"ref_id":"313"},{"children":[{"text":"\n    )"}]}],"node_type":"Last","ref_id":"314"}],"ref_id":"315"}]},{"children":[{"text":"\n    "}]},{"children":[{"children":[{"text":"return "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"Coalesce("}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"children":[{"text":"EDVisit"}]}],"ref_id":"316"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"317"}],"node_type":"Property","ref_id":"317"}],"node_type":"Start","ref_id":"318"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"VisitStart"}]}],"node_type":"QueryLetRef","ref_id":"319"},{"children":[{"text":")"}]}],"ref_id":"320"},{"children":[{"text":", \n    "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"children":[{"text":"Visit"}]}],"ref_id":"321"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"322"}],"node_type":"Property","ref_id":"322"}],"ref_id":"323"},{"children":[{"text":"]"}]}],"node_type":"Interval","ref_id":"324"}],"ref_id":"325"}],"node_type":"Query","ref_id":"326"}],"node_type":"Query","ref_id":"326"}],"ref_id":"327"}],"define_name":"HospitalizationWithObservation"},{"children":[{"children":[{"children":[{"text":"define function \"ToDate\"(Value "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"328"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"DateTime("}]},{"children":[{"children":[{"text":"year from "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"329"}],"ref_id":"330"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"month from "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"331"}],"ref_id":"332"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"day from "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"333"}],"ref_id":"334"},{"children":[{"text":", 0, 0, 0, 0, "}],"ref_id":"335"},{"children":[{"children":[{"text":"timezoneoffset from "}]},{"children":[{"children":[{"text":"Value"}]}],"node_type":"OperandRef","ref_id":"339"}],"ref_id":"340"},{"children":[{"text":")"}]}],"node_type":"DateTime","ref_id":"341"}],"node_type":"DateTime","ref_id":"341"}],"ref_id":"342"}],"define_name":"ToDate"},{"children":[{"children":[{"children":[{"text":"define function \"HospitalizationWithObservationLengthofStay\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"343"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"\"LengthInDays\"("}]},{"children":[{"children":[{"text":"\"HospitalizationWithObservation\"("}]},{"children":[{"children":[{"text":"Encounter"}]}],"node_type":"OperandRef","ref_id":"344"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"345"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"346"}],"node_type":"FunctionRef","ref_id":"346"}],"ref_id":"347"}],"define_name":"HospitalizationWithObservationLengthofStay"},{"children":[{"children":[{"children":[{"text":"define function \"FirstInpatientIntensiveCareUnit\"(Encounter "}]},{"children":[{"children":[{"text":"\"Encounter, Performed\""}]}],"ref_id":"348"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"First("}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"("}]},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"349"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"facilityLocations"}]}],"node_type":"Property","ref_id":"350"}],"node_type":"Property","ref_id":"350"},{"children":[{"text":")"}]}],"node_type":"Property","ref_id":"350"},{"children":[{"text":"HospitalLocation"}]}],"ref_id":"351"}]},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"where "}]},{"children":[{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"352"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"code"}]}],"ref_id":"353"}],"ref_id":"353"},{"children":[{"text":" in "}]},{"children":[{"children":[{"text":"\"Intensive Care Unit\""}]}],"ref_id":"354"}],"node_type":"InValueSet","ref_id":"355"},{"children":[{"text":"\n        and "}]},{"children":[{"children":[{"children":[{"children":[{"text":"HospitalLocation"}]}],"ref_id":"356"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"Property","ref_id":"357"}],"node_type":"Property","ref_id":"357"},{"children":[{"text":" during "}],"node_type":"IncludedIn","ref_id":"360"},{"children":[{"children":[{"children":[{"text":"Encounter"}]}],"ref_id":"358"},{"children":[{"text":"."}]},{"children":[{"children":[{"text":"relevantPeriod"}]}],"node_type":"Property","ref_id":"359"}],"node_type":"Property","ref_id":"359"}],"node_type":"IncludedIn","ref_id":"360"}],"ref_id":"361"}],"ref_id":"361"},{"children":[{"text":"\n      "}]},{"children":[{"children":[{"text":"sort by "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"locationPeriod"}]}],"node_type":"IdentifierRef","ref_id":"362"}],"node_type":"Start","ref_id":"363"}],"ref_id":"364"}],"ref_id":"365"}],"ref_id":"366"},{"children":[{"text":"\n  )"}]}],"node_type":"First","ref_id":"367"}],"node_type":"First","ref_id":"367"}],"ref_id":"368"}],"define_name":"FirstInpatientIntensiveCareUnit"},{"children":[{"children":[{"children":[{"text":"define function \"NormalizeInterval\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"369"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"370"},{"children":[{"text":"\u003e"}]}],"ref_id":"371"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"372"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"373"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"Interval["}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"374"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"pointInTime"}]}],"ref_id":"375"},{"children":[{"text":"]"}]}],"ref_id":"376"},{"children":[{"text":"\n    else "}]},{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"377"},{"children":[{"text":" is not null"}]}],"node_type":"Not","ref_id":"378"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"period"}]}],"ref_id":"379"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"null as "}],"node_type":"Null","ref_id":"380"},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"381"},{"children":[{"text":"\u003e"}]}],"ref_id":"382"}],"ref_id":"383"}],"ref_id":"384"}],"node_type":"If","ref_id":"385"}],"node_type":"If","ref_id":"385"}],"ref_id":"386"}],"define_name":"NormalizeInterval"},{"children":[{"children":[{"children":[{"text":"define function \"HasStart\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"387"},{"children":[{"text":"\u003e"}]}],"ref_id":"388"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"389"}],"node_type":"Start","ref_id":"390"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"391"},{"children":[{"text":"\n      or "}]},{"children":[{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"392"}],"node_type":"Start","ref_id":"393"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"minimum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"394"}],"node_type":"MinValue","ref_id":"395"}],"node_type":"Equal","ref_id":"396"}],"node_type":"Or","ref_id":"397"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"397"}],"node_type":"Not","ref_id":"398"}],"node_type":"Not","ref_id":"398"}],"ref_id":"399"}],"define_name":"HasStart"},{"children":[{"children":[{"children":[{"text":"define function \"HasEnd\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"400"},{"children":[{"text":"\u003e"}]}],"ref_id":"401"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"not "}]},{"children":[{"children":[{"text":"( \n    "}]},{"children":[{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"402"}],"node_type":"End","ref_id":"403"},{"children":[{"text":" is null"}]}],"node_type":"IsNull","ref_id":"404"},{"children":[{"text":"\n      or \n      "}]},{"children":[{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"405"}],"node_type":"End","ref_id":"406"},{"children":[{"text":" = "}]},{"children":[{"children":[{"text":"maximum "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"407"}],"node_type":"MaxValue","ref_id":"408"}],"node_type":"Equal","ref_id":"409"}],"node_type":"Or","ref_id":"410"},{"children":[{"text":"\n  )"}]}],"node_type":"Or","ref_id":"410"}],"node_type":"Not","ref_id":"411"}],"node_type":"Not","ref_id":"411"}],"ref_id":"412"}],"define_name":"HasEnd"},{"children":[{"children":[{"children":[{"text":"define function \"Latest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"413"},{"children":[{"text":"\u003e"}]}],"ref_id":"414"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasEnd("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"415"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"416"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"416"},{"children":[{"text":" then \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"417"}],"ref_id":"418"},{"children":[{"text":" \n    else "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"419"}],"ref_id":"420"}],"node_type":"If","ref_id":"421"}],"node_type":"If","ref_id":"421"}],"ref_id":"422"}],"define_name":"Latest"},{"children":[{"children":[{"children":[{"text":"define function \"Earliest\"(period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"423"},{"children":[{"text":"\u003e"}]}],"ref_id":"424"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"if "}]},{"children":[{"children":[{"text":"( "}]},{"children":[{"children":[{"text":"HasStart("}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"425"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"426"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"426"},{"children":[{"text":" then "}]},{"children":[{"children":[{"text":"start of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"427"}],"ref_id":"428"},{"children":[{"text":" \n    else \n  "}]},{"children":[{"children":[{"text":"end of "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"429"}],"ref_id":"430"}],"node_type":"If","ref_id":"431"}],"node_type":"If","ref_id":"431"}],"ref_id":"432"}],"define_name":"Earliest"},{"children":[{"children":[{"children":[{"text":"define function \"LatestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"433"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"434"},{"children":[{"text":"\u003e"}]}],"ref_id":"435"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Latest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"436"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"437"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"438"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"439"}],"node_type":"FunctionRef","ref_id":"439"}],"ref_id":"440"}],"define_name":"LatestOf"},{"children":[{"children":[{"children":[{"text":"define function \"EarliestOf\"(pointInTime "}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"441"},{"children":[{"text":", period "}]},{"children":[{"children":[{"text":"Interval\u003c"}]},{"children":[{"children":[{"text":"DateTime"}]}],"ref_id":"442"},{"children":[{"text":"\u003e"}]}],"ref_id":"443"},{"children":[{"text":" ):\n  "}]},{"children":[{"children":[{"children":[{"text":"Earliest("}]},{"children":[{"children":[{"text":"NormalizeInterval("}]},{"children":[{"children":[{"text":"pointInTime"}]}],"node_type":"OperandRef","ref_id":"444"},{"children":[{"text":", "}]},{"children":[{"children":[{"text":"period"}]}],"node_type":"OperandRef","ref_id":"445"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"446"},{"children":[{"text":")"}]}],"node_type":"FunctionRef","ref_id":"447"}],"node_type":"FunctionRef","ref_id":"447"}],"ref_id":"448"}],"define_name":"EarliestOf"}],"identifier":{"id":"MATGlobalCommonFunctions","version":"6.2.000"}},"is_main_library":false,"is_top_level":true,"library_name":"MATGlobalCommonFunctions","library_version":"6.2.000","statement_dependencies":[{"_id":{"$oid":"6260c30dc6e47bee42d97b44"},"statement_name":"CalendarAgeInYearsAt"},{"_id":{"$oid":"6260c30dc6e47bee42d97b45"},"statement_name":"NormalizeInterval"}]}],"created_at":null,"description":"Percentage of visits for patients aged 18 years and older for which the eligible professional or eligible clinician attests to documenting a list of current medications using all immediate resources available on the date of the encounter","hqmf_id":"2C928084-7545-FE85-0175-4C7C02DD03CD","hqmf_set_id":"9A032D9C-3D9B-11E1-8634-00237D5BF174","hqmf_version_number":"11.0.000","main_cql_library":"DocumentationofCurrentMedications","measure_attributes":[{"code":"OTH","value":"68","name":"eCQM Identifier (Measure Authoring Tool)","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"eCQM Identifier (Measure Authoring Tool)"},"value_obj":{"type":"ED","value":"68","media_type":"text/plain"}},{"code":"OTH","value":"Not Applicable","name":"NQF Number","code_obj":{"type":"CD","null_flavor":"OTH","original_text":"NQF Number"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"COPY","value":"Limited proprietary coding is contained in the measure specifications for convenience. Users of the proprietary code sets should obtain all necessary licenses from the owners of these code sets. \n\nCPT(R) contained in the Measure specifications is copyright 2004-2020 American Medical Association. LOINC(R) copyright 2004-2020 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2020 International Health Terminology Standards Development Organisation. ICD-10 is copyright 2020 World Health Organization. All Rights Reserved.","name":"Copyright","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"COPY","title":"Copyright"},"value_obj":{"type":"ED","value":"Limited proprietary coding is contained in the measure specifications for convenience. Users of the proprietary code sets should obtain all necessary licenses from the owners of these code sets. \n\nCPT(R) contained in the Measure specifications is copyright 2004-2020 American Medical Association. LOINC(R) copyright 2004-2020 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2020 International Health Terminology Standards Development Organisation. ICD-10 is copyright 2020 World Health Organization. All Rights Reserved.","media_type":"text/plain"}},{"code":"DISC","value":"These performance measures are not clinical guidelines and do not establish a standard of medical care, and have not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","name":"Disclaimer","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DISC","title":"Disclaimer"},"value_obj":{"type":"ED","value":"These performance measures are not clinical guidelines and do not establish a standard of medical care, and have not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","media_type":"text/plain"}},{"code":"MSRSCORE","name":"Measure Scoring","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRSCORE","title":"Measure Scoring"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROPOR","title":"Proportion"}},{"code":"MSRTYPE","name":"Measure Type","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRTYPE","title":"Measure Type"},"value_obj":{"type":"CD","system":"2.16.840.1.113883.5.1063","code":"PROCESS","title":"PROCESS"}},{"code":"STRAT","value":"None","name":"Stratification","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"STRAT","title":"Stratification"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRADJ","value":"None","name":"Risk Adjustment","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRADJ","title":"Risk Adjustment"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"MSRAGG","value":"None","name":"Rate Aggregation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"MSRAGG","title":"Rate Aggregation"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"RAT","value":"According to the National Center for Health Statistics, during the years of 2013-2016, 48.4 percent of patients (both male and female) were prescribed at least one prescription medication with 12.6 percent taking 5 or more medications. Additionally, 89.8 percent of patients (both male and female) aged 65 years and older were prescribed at least one medication with 40.9 percent taking 5 or more medications (2018).  In this context, maintaining an accurate and complete medication list has proven to be a challenging documentation endeavor for various health care provider settings. While most of outpatient encounters (two-thirds) result in providers prescribing at least one medication, hospitals have been the focus of medication safety efforts (Stock, Scott, \u0026 Gurtel, 2009). Nassaralla, Naessens, Chaudhry, Hansen, and Scheitel (2007) caution that this is at odds with the current trend, where patients with chronic illnesses are increasingly being treated in the outpatient setting and require careful monitoring of multiple medications. Additionally, Nassaralla et al. (2007) reveal that it is in fact in outpatient settings where more fatal adverse drug events (ADE) occur when these are compared to those occurring in hospitals (1 of 131 outpatient deaths compared to 1 in 854 inpatient deaths). In the outpatient setting, ADEs occur 25% of the time and over one-third of these are considered preventable (Tache, Sonnichsen, \u0026 Ashcroft, 2011). Particularly vulnerable are patients over 65 years, with evidence suggesting that the rate of ADEs per 10,000 person per year increases with age; 25-44 years old at 1.3; 45-64 at 2.2, and 65 + at 3.8 (Sarkar, Lpez, \u0026 Maselli, 2011). Other vulnerable groups include individuals who are chronically ill or disabled (Nabhanizadeh, Oppewal, Boot, \u0026 Maes, 2019). These population groups are more likely to experience ADEs and subsequent hospitalization. \n\nA multiplicity of providers and inadequate care coordination among them has been identified as barriers to collecting complete and reliable medication records. A study conducted by Poornima et al. (2015) indicates that reconciliation and documentation continue to be poorly executed with discrepancies occurring in 92% (74 of 80 patients) of medication lists among admittance to the emergency room. Of 80 patients included in the study, the home medications were reordered for 65% of patients on their admission and of the 65% the majority (29%) had a change in their dosing interval, while 23% had a change in their route of administration, and 13% had a change in dose. A total of 361 medication discrepancies, or the difference between the medications patients were taking before admission and those listed in their admission orders, were identified in at least 74 patients. The study found that \"Through an appropriate reconciliation programme, around 80% of errors relating to medication and the potential harm caused by these errors could be reduced\" (Poornima et al., 2015, p. 243). Presley et al. (2020) also recognized specific barriers to sufficient medication documentation and reconciliation in rural and resource-limited care settings.\n\nDocumentation of current medications in the medical record facilitates the process of medication review and reconciliation by the provider, which is necessary for reducing ADEs and promoting medication safety. The need for provider to provider coordination regarding medication records, and the existing gap in implementation, is highlighted in the American Medical Association's Physician's Role in Medication Reconciliation, which states that \"critical patient information, including medical and medication histories, current medications the patient is receiving and taking, and sources of medications, is essential to the delivery of safe medical care. However, interruptions in the continuity of care and information gaps in patient health records are common and significantly affect patient outcomes\" (2007, p. 7). This is because clinical decisions based on information that is incomplete and/or inaccurate are likely to lead to medication error and ADEs. Weeks, Corbette, and Stream (2010) noted similar barriers and identified the utilization of health information technology as an opportunity for facilitating the creation of universal medication lists. One 2015 meta-analysis showed an association between EHR documentation with an overall RR of 0.46 (95% CI = 0.38 to 0.55; P \u003c 0.001) and ADEs with an overall RR of 0.66 (95% CI = 0.44 to 0.99; P = 0.045). This meta-analysis provides evidence that the use of the EHR can improve the quality of healthcare delivered to patients by reducing medication errors and ADEs (Campanella et al., 2016).","name":"Rationale","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"RAT","title":"Rationale"},"value_obj":{"type":"ED","value":"According to the National Center for Health Statistics, during the years of 2013-2016, 48.4 percent of patients (both male and female) were prescribed at least one prescription medication with 12.6 percent taking 5 or more medications. Additionally, 89.8 percent of patients (both male and female) aged 65 years and older were prescribed at least one medication with 40.9 percent taking 5 or more medications (2018).  In this context, maintaining an accurate and complete medication list has proven to be a challenging documentation endeavor for various health care provider settings. While most of outpatient encounters (two-thirds) result in providers prescribing at least one medication, hospitals have been the focus of medication safety efforts (Stock, Scott, \u0026 Gurtel, 2009). Nassaralla, Naessens, Chaudhry, Hansen, and Scheitel (2007) caution that this is at odds with the current trend, where patients with chronic illnesses are increasingly being treated in the outpatient setting and require careful monitoring of multiple medications. Additionally, Nassaralla et al. (2007) reveal that it is in fact in outpatient settings where more fatal adverse drug events (ADE) occur when these are compared to those occurring in hospitals (1 of 131 outpatient deaths compared to 1 in 854 inpatient deaths). In the outpatient setting, ADEs occur 25% of the time and over one-third of these are considered preventable (Tache, Sonnichsen, \u0026 Ashcroft, 2011). Particularly vulnerable are patients over 65 years, with evidence suggesting that the rate of ADEs per 10,000 person per year increases with age; 25-44 years old at 1.3; 45-64 at 2.2, and 65 + at 3.8 (Sarkar, Lpez, \u0026 Maselli, 2011). Other vulnerable groups include individuals who are chronically ill or disabled (Nabhanizadeh, Oppewal, Boot, \u0026 Maes, 2019). These population groups are more likely to experience ADEs and subsequent hospitalization. \n\nA multiplicity of providers and inadequate care coordination among them has been identified as barriers to collecting complete and reliable medication records. A study conducted by Poornima et al. (2015) indicates that reconciliation and documentation continue to be poorly executed with discrepancies occurring in 92% (74 of 80 patients) of medication lists among admittance to the emergency room. Of 80 patients included in the study, the home medications were reordered for 65% of patients on their admission and of the 65% the majority (29%) had a change in their dosing interval, while 23% had a change in their route of administration, and 13% had a change in dose. A total of 361 medication discrepancies, or the difference between the medications patients were taking before admission and those listed in their admission orders, were identified in at least 74 patients. The study found that \"Through an appropriate reconciliation programme, around 80% of errors relating to medication and the potential harm caused by these errors could be reduced\" (Poornima et al., 2015, p. 243). Presley et al. (2020) also recognized specific barriers to sufficient medication documentation and reconciliation in rural and resource-limited care settings.\n\nDocumentation of current medications in the medical record facilitates the process of medication review and reconciliation by the provider, which is necessary for reducing ADEs and promoting medication safety. The need for provider to provider coordination regarding medication records, and the existing gap in implementation, is highlighted in the American Medical Association's Physician's Role in Medication Reconciliation, which states that \"critical patient information, including medical and medication histories, current medications the patient is receiving and taking, and sources of medications, is essential to the delivery of safe medical care. However, interruptions in the continuity of care and information gaps in patient health records are common and significantly affect patient outcomes\" (2007, p. 7). This is because clinical decisions based on information that is incomplete and/or inaccurate are likely to lead to medication error and ADEs. Weeks, Corbette, and Stream (2010) noted similar barriers and identified the utilization of health information technology as an opportunity for facilitating the creation of universal medication lists. One 2015 meta-analysis showed an association between EHR documentation with an overall RR of 0.46 (95% CI = 0.38 to 0.55; P \u003c 0.001) and ADEs with an overall RR of 0.66 (95% CI = 0.44 to 0.99; P = 0.045). This meta-analysis provides evidence that the use of the EHR can improve the quality of healthcare delivered to patients by reducing medication errors and ADEs (Campanella et al., 2016).","media_type":"text/plain"}},{"code":"CRS","value":"The Joint Commission's 2020 Ambulatory Health Care National Patient Safety Goals guide providers to maintain and communicate accurate patient medication information. Specifically, the section \"Use Medicines Safely NPSG.03.06.01\" states the following: Record and pass along correct information about a patients medicines. Find out what medicines the patient is taking. Compare those medicines to new medicines given to the patient. Give the patient written information about the medicines they need to take. Tell the patient it is important to bring their up-to-date list of medicines every time they visit a doctor. \n\nThe National Quality Forum's Safe Practices for Better Healthcare - 2010 Update, states the following: \"the healthcare organization must develop, reconcile, and communicate an accurate patient medication list throughout the continuum of care\" (p. 40).","name":"Clinical Recommendation Statement","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"CRS","title":"Clinical Recommendation Statement"},"value_obj":{"type":"ED","value":"The Joint Commission's 2020 Ambulatory Health Care National Patient Safety Goals guide providers to maintain and communicate accurate patient medication information. Specifically, the section \"Use Medicines Safely NPSG.03.06.01\" states the following: Record and pass along correct information about a patients medicines. Find out what medicines the patient is taking. Compare those medicines to new medicines given to the patient. Give the patient written information about the medicines they need to take. Tell the patient it is important to bring their up-to-date list of medicines every time they visit a doctor. \n\nThe National Quality Forum's Safe Practices for Better Healthcare - 2010 Update, states the following: \"the healthcare organization must develop, reconcile, and communicate an accurate patient medication list throughout the continuum of care\" (p. 40).","media_type":"text/plain"}},{"code":"IDUR","value":"Higher score indicates better quality","name":"Improvement Notation","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IDUR","title":"Improvement Notation"},"value_obj":{"type":"ED","value":"Higher score indicates better quality","media_type":"text/plain"}},{"code":"REF","value":"CITATIONAmerican Medical Association. (2007). The physicians role in medication reconciliation: Issues, strategies, and safety principles. Retrieved from https://pogoe.org/sites/default/files/Medication%20Reconciliation.pdf","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONAmerican Medical Association. (2007). The physicians role in medication reconciliation: Issues, strategies, and safety principles. Retrieved from https://pogoe.org/sites/default/files/Medication%20Reconciliation.pdf","media_type":"text/plain"}},{"code":"REF","value":"CITATIONCampanella, P., Lovato, E., Marone, C., Fallacara, L., Mancuso, A., Ricciardi, W., \u0026 Specchia, M. L. (2016). The impact of electronic health records on health care quality: A systematic review and meta-analysis. European Journal of Public Health, 26(1), 60-64. http://doi:org/10.1093/eurpub/ckv122","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONCampanella, P., Lovato, E., Marone, C., Fallacara, L., Mancuso, A., Ricciardi, W., \u0026 Specchia, M. L. (2016). The impact of electronic health records on health care quality: A systematic review and meta-analysis. European Journal of Public Health, 26(1), 60-64. http://doi:org/10.1093/eurpub/ckv122","media_type":"text/plain"}},{"code":"REF","value":"CITATIONNabhanizadeh, A., Oppewal, A., Boot, F. H., \u0026 Maes-Festen, D. (2019). Effectiveness of medication reviews in identifying and reducing medication-related problems among people with intellectual disabilities: A systematic review. Journal of Applied Research in Intellectual Disabilities, 32(4), 750761. https://doi.org/10.1111/jar.12580","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONNabhanizadeh, A., Oppewal, A., Boot, F. H., \u0026 Maes-Festen, D. (2019). Effectiveness of medication reviews in identifying and reducing medication-related problems among people with intellectual disabilities: A systematic review. Journal of Applied Research in Intellectual Disabilities, 32(4), 750761. https://doi.org/10.1111/jar.12580","media_type":"text/plain"}},{"code":"REF","value":"CITATIONNassaralla, C. L., Naessens, J. M., Chaudhry, R., Hansen, M. A., \u0026 Scheitel, S. M. (2007). Implementation of a medication reconciliation process in an ambulatory internal medicine clinic. Quality and Safety in Health Care, 16(2), 90-94. http://doi.org/10.1136/qshc.2006.021113","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONNassaralla, C. L., Naessens, J. M., Chaudhry, R., Hansen, M. A., \u0026 Scheitel, S. M. (2007). Implementation of a medication reconciliation process in an ambulatory internal medicine clinic. Quality and Safety in Health Care, 16(2), 90-94. http://doi.org/10.1136/qshc.2006.021113","media_type":"text/plain"}},{"code":"REF","value":"CITATIONNational Center for Health Statistics. (2018). Health, United States, 2018: Supplementary Table 38. Prescription drug use in the past 30 days, by sex, race and Hispanic origin, and age: United States, selected years 19881994 through 20132016 Retrieved from https://www.cdc.gov/nchs/data/hus/2018/038.pdf","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONNational Center for Health Statistics. (2018). Health, United States, 2018: Supplementary Table 38. Prescription drug use in the past 30 days, by sex, race and Hispanic origin, and age: United States, selected years 19881994 through 20132016 Retrieved from https://www.cdc.gov/nchs/data/hus/2018/038.pdf","media_type":"text/plain"}},{"code":"REF","value":"CITATIONNational Quality Forum. (2010). Safe practices for better healthcare - 2010 update. Retrieved from http://www.qualityforum.org/Projects/Safe_Practices_2010.aspx","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONNational Quality Forum. (2010). Safe practices for better healthcare - 2010 update. Retrieved from http://www.qualityforum.org/Projects/Safe_Practices_2010.aspx","media_type":"text/plain"}},{"code":"REF","value":"CITATIONPresley, C. A., Wooldridge, K. T., Byerly, S. H., Aylor, A. R., Kaboli, P. J., Roumie, C. L., Schnipper, J. L., Dittus, R. S., Mixon, A. S. (2020). The Rural VA Multi-Center Medication Reconciliation Quality Improvement Study (R-VA-MARQUIS). American Journal of Health-System Pharmacy, 77, 128-137. https://doi.org/10.1093/ajhp/zxz275","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONPresley, C. A., Wooldridge, K. T., Byerly, S. H., Aylor, A. R., Kaboli, P. J., Roumie, C. L., Schnipper, J. L., Dittus, R. S., Mixon, A. S. (2020). The Rural VA Multi-Center Medication Reconciliation Quality Improvement Study (R-VA-MARQUIS). American Journal of Health-System Pharmacy, 77, 128-137. https://doi.org/10.1093/ajhp/zxz275","media_type":"text/plain"}},{"code":"REF","value":"CITATIONPoornima, P., Reshma, P., Ramakrishnan, T. V., Rani, N. V., Devi, G. S., Seshadri, P. (2015). Medication reconciliation and medication error prevention in an emergency department of a tertiary care hospital. Journal of Young Pharmacists, 7(3), 241-249. http://doi.org/10.5530/jyp.2015.3.15","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONPoornima, P., Reshma, P., Ramakrishnan, T. V., Rani, N. V., Devi, G. S., Seshadri, P. (2015). Medication reconciliation and medication error prevention in an emergency department of a tertiary care hospital. Journal of Young Pharmacists, 7(3), 241-249. http://doi.org/10.5530/jyp.2015.3.15","media_type":"text/plain"}},{"code":"REF","value":"CITATIONSarkar, U., Lpez, A., Maselli, J. H., Gonzales, R. (2011). Adverse drug events in U.S. adult ambulatory medical care. Health Services Research, 46(5), 1517-1533. http://doi.org/10.1111/j.1475-6773.2011.01269.x","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONSarkar, U., Lpez, A., Maselli, J. H., Gonzales, R. (2011). Adverse drug events in U.S. adult ambulatory medical care. Health Services Research, 46(5), 1517-1533. http://doi.org/10.1111/j.1475-6773.2011.01269.x","media_type":"text/plain"}},{"code":"REF","value":"CITATIONStock, R., Scott, J., \u0026 Gurtel, S. (2009). Using an electronic prescribing system to ensure accurate medication lists in a large multidisciplinary medical group. The Joint Commission Journal on Quality and Patient Safety, 35(5), 271-277","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONStock, R., Scott, J., \u0026 Gurtel, S. (2009). Using an electronic prescribing system to ensure accurate medication lists in a large multidisciplinary medical group. The Joint Commission Journal on Quality and Patient Safety, 35(5), 271-277","media_type":"text/plain"}},{"code":"REF","value":"CITATIONTache, S. V., Sonnichsen, A., \u0026 Ashcroft, D. M. (2011). Prevalence of adverse drug events in ambulatory care: A systematic review. The Annals of Pharmacotherapy, 45(7-8), 977-989. http://doi.org/10.1345/aph.1P627","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONTache, S. V., Sonnichsen, A., \u0026 Ashcroft, D. M. (2011). Prevalence of adverse drug events in ambulatory care: A systematic review. The Annals of Pharmacotherapy, 45(7-8), 977-989. http://doi.org/10.1345/aph.1P627","media_type":"text/plain"}},{"code":"REF","value":"CITATIONThe Joint Commission. (2020). Ambulatory Health Care National Patient Safety Goals. Retrieved from https://www.jointcommission.org/standards/national-patient-safety-goals/ambulatory-health-care-2020-national-patient-safety-goals/","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONThe Joint Commission. (2020). Ambulatory Health Care National Patient Safety Goals. Retrieved from https://www.jointcommission.org/standards/national-patient-safety-goals/ambulatory-health-care-2020-national-patient-safety-goals/","media_type":"text/plain"}},{"code":"REF","value":"CITATIONWeeks, D. L., Corbette, C. F., \u0026 Stream, G. (2010). Beliefs of ambulatory care physicians about accuracy of patient medication records and technology-enhanced solutions to improve accuracy. Journal for Healthcare Quality, 32(5), 12-21. http://doi.org/10.1111/j.1945-1474.2010.00097.x","name":"Reference","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"REF","title":"Reference"},"value_obj":{"type":"ED","value":"CITATIONWeeks, D. L., Corbette, C. F., \u0026 Stream, G. (2010). Beliefs of ambulatory care physicians about accuracy of patient medication records and technology-enhanced solutions to improve accuracy. Journal for Healthcare Quality, 32(5), 12-21. http://doi.org/10.1111/j.1945-1474.2010.00097.x","media_type":"text/plain"}},{"code":"DEF","value":"Current Medications:\nMedications the patient is presently taking including all prescriptions, over-the-counters, herbals and vitamin/mineral/dietary (nutritional) supplements with each medication's name, dosage, frequency and administered route.\n\nRoute:\nDocumentation of the way the medication enters the body (some examples include but are not limited to: oral, sublingual, subcutaneous injections, and/or topical).","name":"Definition","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DEF","title":"Definition"},"value_obj":{"type":"ED","value":"Current Medications:\nMedications the patient is presently taking including all prescriptions, over-the-counters, herbals and vitamin/mineral/dietary (nutritional) supplements with each medication's name, dosage, frequency and administered route.\n\nRoute:\nDocumentation of the way the medication enters the body (some examples include but are not limited to: oral, sublingual, subcutaneous injections, and/or topical).","media_type":"text/plain"}},{"code":"GUIDE","value":"This eCQM is an episode-based measure. An episode is defined as each eligible encounter during the measurement period. This measure is to be reported for every encounter during the measurement period.\n\nEligible professionals or eligible clinicians reporting this measure may document medication information received from the patient, authorized representative(s), caregiver(s) or other available healthcare resources.\n \nBy reporting the action described in this measure, the provider attests to having documented a list of current medications utilizing all immediate resources available at the time of the encounter.\n\nThis list must include all known prescriptions, over-the-counter (OTC) products, herbals, vitamins, minerals, dietary (nutritional) supplements AND must contain the medications' name, dosage, frequency and route of administration.\n\nThis measure should also be reported if the eligible professional or eligible clinician documented the patient is not currently taking any medications.\n\nThis version of the eCQM uses QDM version 5.5. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","name":"Guidance","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"GUIDE","title":"Guidance"},"value_obj":{"type":"ED","value":"This eCQM is an episode-based measure. An episode is defined as each eligible encounter during the measurement period. This measure is to be reported for every encounter during the measurement period.\n\nEligible professionals or eligible clinicians reporting this measure may document medication information received from the patient, authorized representative(s), caregiver(s) or other available healthcare resources.\n \nBy reporting the action described in this measure, the provider attests to having documented a list of current medications utilizing all immediate resources available at the time of the encounter.\n\nThis list must include all known prescriptions, over-the-counter (OTC) products, herbals, vitamins, minerals, dietary (nutritional) supplements AND must contain the medications' name, dosage, frequency and route of administration.\n\nThis measure should also be reported if the eligible professional or eligible clinician documented the patient is not currently taking any medications.\n\nThis version of the eCQM uses QDM version 5.5. Please refer to the eCQI resource center (https://ecqi.healthit.gov/qdm) for more information on the QDM.","media_type":"text/plain"}},{"code":"TRANF","value":"TBD","name":"Transmission Format","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"TRANF","title":"Transmission Format"},"value_obj":{"type":"ED","value":"TBD","media_type":"text/plain"}},{"code":"IPOP","value":"All visits occurring during the 12-month measurement period for patients aged 18 years and older","name":"Initial Population","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"IPOP","title":"Initial Population"},"value_obj":{"type":"ED","value":"All visits occurring during the 12-month measurement period for patients aged 18 years and older","media_type":"text/plain"}},{"code":"DENOM","value":"Equals Initial Population","name":"Denominator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENOM","title":"Denominator"},"value_obj":{"type":"ED","value":"Equals Initial Population","media_type":"text/plain"}},{"code":"DENEX","value":"None","name":"Denominator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEX","title":"Denominator Exclusions"},"value_obj":{"type":"ED","value":"None","media_type":"text/plain"}},{"code":"NUMER","value":"Eligible professional or eligible clinician attests to documenting, updating, or reviewing the patient's current medications using all immediate resources available on the date of the encounter","name":"Numerator","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMER","title":"Numerator"},"value_obj":{"type":"ED","value":"Eligible professional or eligible clinician attests to documenting, updating, or reviewing the patient's current medications using all immediate resources available on the date of the encounter","media_type":"text/plain"}},{"code":"NUMEX","value":"Not Applicable","name":"Numerator Exclusions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"NUMEX","title":"Numerator Exclusions"},"value_obj":{"type":"ED","value":"Not Applicable","media_type":"text/plain"}},{"code":"DENEXCEP","value":"Documentation of a medical reason(s) for not documenting, updating, or reviewing the patients current medications list (e.g., patient is in an urgent or emergent medical situation where time is of the essence and to delay treatment would jeopardize the patient's health status)","name":"Denominator Exceptions","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"DENEXCEP","title":"Denominator Exceptions"},"value_obj":{"type":"ED","value":"Documentation of a medical reason(s) for not documenting, updating, or reviewing the patients current medications list (e.g., patient is in an urgent or emergent medical situation where time is of the essence and to delay treatment would jeopardize the patient's health status)","media_type":"text/plain"}},{"code":"SDE","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","name":"Supplemental Data Elements","code_obj":{"type":"CD","system":"2.16.840.1.113883.5.4","code":"SDE","title":"Supplemental Data Elements"},"value_obj":{"type":"ED","value":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex","media_type":"text/plain"}}],"measure_period":{"type":"IVL_TS","low":{"type":"TS","value":"201201010000","inclusive?":true,"derived?":false},"high":{"type":"TS","value":"201212312359","inclusive?":true,"derived?":false},"width":{"type":"PQ","unit":"a","value":"1","inclusive?":true,"derived?":false}},"measure_scoring":"PROPORTION","population_criteria":{"IPP":{"conjunction?":true,"type":"IPP","hqmf_id":"8B444C58-4A04-4D51-B7B8-928AE6CA680B","preconditions":[{"id":2,"preconditions":[{"id":1,"reference":"DocumentationofCurrentMedications__Initial_Population__F59107CD_4640_41E1_B8A2_A0C731805ED1"}],"conjunction_code":"allTrue"}]},"DENOM":{"conjunction?":true,"type":"DENOM","hqmf_id":"5A4DF326-B357-4194-B8F0-A120369F5659","preconditions":[{"id":4,"preconditions":[{"id":3,"reference":"DocumentationofCurrentMedications__Denominator__F59107CD_4640_41E1_B8A2_A0C731805ED1"}],"conjunction_code":"allTrue"}]},"NUMER":{"conjunction?":true,"type":"NUMER","hqmf_id":"1AFA65C6-DD78-4C1B-BCC9-BDB42C34C934","preconditions":[{"id":6,"preconditions":[{"id":5,"reference":"DocumentationofCurrentMedications__Numerator__F59107CD_4640_41E1_B8A2_A0C731805ED1"}],"conjunction_code":"allTrue"}]},"DENEXCEP":{"conjunction?":true,"type":"DENEXCEP","hqmf_id":"45228FD2-22C3-4158-BEAD-91C5F7683AD0","preconditions":[{"id":8,"preconditions":[{"id":7,"reference":"DocumentationofCurrentMedications__Denominator_Exceptions__F59107CD_4640_41E1_B8A2_A0C731805ED1"}],"conjunction_code":"atLeastOneTrue"}]}},"population_sets":[{"_id":{"$oid":"6260c30dc6e47bee42d97b46"},"population_set_id":"PopulationSet_1","populations":{"DENEXCEP":{"_id":{"$oid":"6260c30dc6e47bee42d97b47"},"hqmf_id":"45228FD2-22C3-4158-BEAD-91C5F7683AD0","library_name":"DocumentationofCurrentMedications","statement_name":"Denominator Exceptions"},"DENOM":{"_id":{"$oid":"6260c30dc6e47bee42d97b48"},"hqmf_id":"5A4DF326-B357-4194-B8F0-A120369F5659","library_name":"DocumentationofCurrentMedications","statement_name":"Denominator"},"IPP":{"_id":{"$oid":"6260c30dc6e47bee42d97b49"},"hqmf_id":"8B444C58-4A04-4D51-B7B8-928AE6CA680B","library_name":"DocumentationofCurrentMedications","statement_name":"Initial Population"},"NUMER":{"_id":{"$oid":"6260c30dc6e47bee42d97b4a"},"hqmf_id":"1AFA65C6-DD78-4C1B-BCC9-BDB42C34C934","library_name":"DocumentationofCurrentMedications","statement_name":"Numerator"},"_id":{"$oid":"6260c30dc6e47bee42d97b4b"},"_type":"CQM::ProportionPopulationMap"},"supplemental_data_elements":[{"_id":{"$oid":"6260c30dc6e47bee42d97b4c"},"hqmf_id":"817AFC30-A657-4125-83BC-1B1CFB0D1AD8","library_name":"DocumentationofCurrentMedications","statement_name":"SDE Ethnicity"},{"_id":{"$oid":"6260c30dc6e47bee42d97b4d"},"hqmf_id":"642D5B87-0450-4011-8A41-E91358E8ABD8","library_name":"DocumentationofCurrentMedications","statement_name":"SDE Payer"},{"_id":{"$oid":"6260c30dc6e47bee42d97b4e"},"hqmf_id":"6D209A00-5A06-4262-9BFE-5955EFD5A316","library_name":"DocumentationofCurrentMedications","statement_name":"SDE Race"},{"_id":{"$oid":"6260c30dc6e47bee42d97b4f"},"hqmf_id":"F20A6B5F-A6D1-4F32-9EF6-49210523784E","library_name":"DocumentationofCurrentMedications","statement_name":"SDE Sex"}],"title":"Population Criteria Section"}],"source_data_criteria":[{"_id":{"$oid":"6260c30dc6e47bee42d97b50"},"_type":"QDM::PatientCharacteristicPayer","codeListId":"2.16.840.1.114222.4.11.3591","dataElementCodes":[],"description":"Patient Characteristic Payer: Payer","hqmfOid":"2.16.840.1.113883.10.20.28.4.58","id":{"$oid":"6260c30dc6e47bee42d97b50"},"qdmCategory":"patient_characteristic","qdmStatus":"payer","qdmTitle":"Patient Characteristic Payer","qdmVersion":"5.5","relevantPeriod":null},{"_id":{"$oid":"6260c30dc6e47bee42d97b51"},"_type":"QDM::PatientCharacteristicSex","codeListId":"2.16.840.1.113762.1.4.1","dataElementCodes":[],"description":"Patient Characteristic Sex: ONCAdministrativeSex","hqmfOid":"2.16.840.1.113883.10.20.28.4.55","id":{"$oid":"6260c30dc6e47bee42d97b51"},"qdmCategory":"patient_characteristic","qdmStatus":"gender","qdmTitle":"Patient Characteristic Sex","qdmVersion":"5.5"},{"_id":{"$oid":"6260c30dc6e47bee42d97b52"},"_type":"QDM::PatientCharacteristicEthnicity","codeListId":"2.16.840.1.114222.4.11.837","dataElementCodes":[],"description":"Patient Characteristic Ethnicity: Ethnicity","hqmfOid":"2.16.840.1.113883.10.20.28.4.56","id":{"$oid":"6260c30dc6e47bee42d97b52"},"qdmCategory":"patient_characteristic","qdmStatus":"ethnicity","qdmTitle":"Patient Characteristic Ethnicity","qdmVersion":"5.5"},{"_id":{"$oid":"6260c30dc6e47bee42d97b53"},"_type":"QDM::PatientCharacteristicRace","codeListId":"2.16.840.1.114222.4.11.836","dataElementCodes":[],"description":"Patient Characteristic Race: Race","hqmfOid":"2.16.840.1.113883.10.20.28.4.59","id":{"$oid":"6260c30dc6e47bee42d97b53"},"qdmCategory":"patient_characteristic","qdmStatus":"race","qdmTitle":"Patient Characteristic Race","qdmVersion":"5.5"},{"_id":{"$oid":"6260c30dc6e47bee42d97b54"},"_type":"QDM::EncounterPerformed","admissionSource":null,"authorDatetime":null,"codeListId":"2.16.840.1.113883.3.600.1.1834","dataElementCodes":[],"description":"Encounter, Performed: EncountertoDocumentMedications","diagnoses":null,"dischargeDisposition":null,"facilityLocations":[],"hqmfOid":"2.16.840.1.113883.10.20.28.4.5","id":{"$oid":"6260c30dc6e47bee42d97b54"},"lengthOfStay":null,"negationRationale":null,"priority":null,"qdmCategory":"encounter","qdmStatus":"performed","qdmTitle":"Encounter, Performed","qdmVersion":"5.5","relevantPeriod":null},{"_id":{"$oid":"6260c30dc6e47bee42d97b55"},"_type":"QDM::PatientCharacteristicBirthdate","birthDatetime":null,"codeListId":"drc-c48426f721cede4d865df946157d5e2dc90bd32763ffcb982ca45b3bd97a29db","dataElementCodes":[],"description":"Patient Characteristic Birthdate: Birth date","hqmfOid":"2.16.840.1.113883.10.20.28.4.54","id":{"$oid":"6260c30dc6e47bee42d97b55"},"qdmCategory":"patient_characteristic","qdmStatus":"birthdate","qdmTitle":"Patient Characteristic Birthdate","qdmVersion":"5.5"},{"_id":{"$oid":"6260c30dc6e47bee42d97b56"},"_type":"QDM::ProcedurePerformed","anatomicalLocationSite":null,"authorDatetime":null,"codeListId":"drc-d070e329c741e91e50c8966a33514d5a85642762b7ac4505c78ba51aa27ee55f","components":null,"dataElementCodes":[],"description":"Procedure, Performed: Documentation of current medications (procedure)","hqmfOid":"2.16.840.1.113883.10.20.28.4.67","id":{"$oid":"6260c30dc6e47bee42d97b56"},"incisionDatetime":null,"method":null,"negationRationale":null,"priority":null,"qdmCategory":"procedure","qdmStatus":"performed","qdmTitle":"Procedure, Performed","qdmVersion":"5.5","rank":null,"reason":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null},{"_id":{"$oid":"6260c30dc6e47bee42d97b57"},"_type":"QDM::InterventionPerformed","authorDatetime":null,"codeListId":"drc-d070e329c741e91e50c8966a33514d5a85642762b7ac4505c78ba51aa27ee55f","dataElementCodes":[],"description":"Intervention, Performed: Documentation of current medications (procedure)","hqmfOid":"2.16.840.1.113883.10.20.28.4.36","id":{"$oid":"6260c30dc6e47bee42d97b57"},"negationRationale":null,"qdmCategory":"intervention","qdmStatus":"performed","qdmTitle":"Intervention, Performed","qdmVersion":"5.5","reason":null,"relevantDatetime":null,"relevantPeriod":null,"result":null,"status":null}],"title":"Documentation of Current Medications in the Medical Record","updated_at":null,"value_set_ids":[{"$oid":"6260c309c6e47bee42d97988"},{"$oid":"6260c309c6e47bee42d97989"},{"$oid":"6260c30dc6e47bee42d9798a"},{"$oid":"6260c30dc6e47bee42d9798b"},{"$oid":"6260c30dc6e47bee42d9798c"},{"$oid":"6260c30dc6e47bee42d9798d"},{"$oid":"6260c30dc6e47bee42d9798e"},{"$oid":"6260c30dc6e47bee42d9798f"},{"$oid":"6260c30dc6e47bee42d97990"},{"$oid":"6260c30dc6e47bee42d97991"},{"$oid":"6260c30dc6e47bee42d97992"},{"$oid":"6260c30dc6e47bee42d97993"},{"$oid":"6260c30dc6e47bee42d97994"}]}